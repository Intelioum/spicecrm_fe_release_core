/*
SpiceUI 1.1.0

This file is part of SpiceCRM in its "More" Editions and thus is licensed and copyrighted software. Your installation or use of this SpiceCRM file is subject to the license agreement you entered regaridng the use of SpiceCRM with aac services k.s or any of its affiliates and partners.

If you are unsure about your licese agreement please contat aac services k.s. at office@all-about-crm.com

Copyright (c) 2016-present, aac services.k.s - All rights reserved.
*/

"use strict";var __decorate=this&&this.__decorate||function(e,t,s,o){var n,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,s):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,s,o);else for(var r=e.length-1;0<=r;r--)(n=e[r])&&(a=(i<3?n(a):3<i?n(t,s,a):n(t,s))||a);return 3<i&&a&&Object.defineProperty(t,s,a),a},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__param=this&&this.__param||function(s,o){return function(e,t){o(e,t,s)}};Object.defineProperty(exports,"__esModule",{value:!0});var core_1=require("@angular/core"),rxjs_1=require("rxjs"),forms_1=require("@angular/forms"),common_1=require("@angular/common"),platform_browser_1=require("@angular/platform-browser"),common_2=require("@angular/common"),forms_2=require("@angular/forms"),directives_1=require("../directives/directives"),router_1=require("@angular/router"),services_1=require("../services/services"),services_2=require("../services/services"),services_3=require("../services/services"),services_4=require("../services/services"),services_5=require("../services/services"),services_6=require("../services/services"),services_7=require("../services/services"),systemrichtextservice=function(){function e(e){this._document=e}return e.prototype.executeCommand=function(e){"h1"!==e&&"h2"!==e&&"h3"!==e&&"h4"!==e&&"h5"!==e&&"h6"!==e&&"p"!==e&&"pre"!==e||this._document.execCommand("formatBlock",!1,e),this._document.execCommand(e,!1,null)},e.prototype.createLink=function(e){if(e.includes("http")){var t='<a href="'+e+'" target="_blank">'+this.selectedText+"</a>";this.insertHtml(t)}else this._document.execCommand("createlink",!1,e)},e.prototype.insertColor=function(e,t){this.restoreSelection()&&("textColor"===t?this._document.execCommand("foreColor",!1,e):this._document.execCommand("hiliteColor",!1,e))},e.prototype.setFontName=function(e){this._document.execCommand("fontName",!1,e)},e.prototype.setFontSize=function(e){this._document.execCommand("fontSize",!1,e)},e.prototype.insertHtml=function(e){if(!this._document.execCommand("insertHTML",!1,e))throw new Error("Unable to perform the operation")},e.prototype.saveSelection=function(){if(window.getSelection){var e=window.getSelection();e.getRangeAt&&e.rangeCount&&(this.savedSelection=e.getRangeAt(0),this.selectedText=e.toString())}else this._document.getSelection&&this._document.createRange?this.savedSelection=document.createRange():this.savedSelection=null},e.prototype.restoreSelection=function(){if(!this.savedSelection)return!1;if(window.getSelection){var e=window.getSelection();return e.removeAllRanges(),e.addRange(this.savedSelection),!0}return!!this._document.getSelection||void 0},e.prototype.checkSelection=function(){if(0===this.savedSelection.toString().length)throw new Error("No Selection Made");return!0},e.prototype.insertImage=function(e){this._document.execCommand("insertImage",!1,e)},e.prototype.createCustomClass=function(e){var t=e.tag?e.tag:"span",s="<"+t+' class="'+e.class+'">'+this.selectedText+"</"+t+">";this.insertHtml(s)},e=__decorate([core_1.Injectable(),__param(0,core_1.Inject(common_1.DOCUMENT)),__metadata("design:paramtypes",[Object])],e)}();exports.systemrichtextservice=systemrichtextservice;var SystemIcon=function(){function e(e){this.metadata=e,this.module="",this.icon="",this.size="",this.sprite="standard",this.addclasses="",this.divClass="slds-media__figure"}return e.prototype.getSizeClass=function(){return this.size?"slds-icon--"+this.size:""},e.prototype.getSvgHRef=function(){return"./sldassets/icons/"+this.getSprite()+"-sprite/svg/symbols.svg#"+this.getIcon()},e.prototype.getIconClass=function(){switch(this.sprite){case"standard":return"slds-icon"+(this.size?" slds-icon--"+this.size:"")+" slds-icon-"+this.getSprite()+"-"+this.getIcon().replace(/_/g,"-")+" "+this.addclasses;default:return"slds-icon"+(this.size?" slds-icon--"+this.size:"")+" slds-icon-text-default "+this.addclasses}},e.prototype.getIcon=function(){if(this.icon)return this.icon;if(this.module&&this.metadata.getModuleIcon(this.module)){var e=this.metadata.getModuleIcon(this.module);return 0<e.indexOf(":")?e.split(":")[1]:e}return"empty"},e.prototype.getSprite=function(){return this.module&&this.metadata.getModuleIcon(this.module)&&0<this.metadata.getModuleIcon(this.module).indexOf(":")?this.metadata.getModuleIcon(this.module).split(":")[0]:this.sprite},__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"module",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"icon",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"size",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"sprite",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"addclasses",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"divClass",void 0),e=__decorate([core_1.Component({selector:"system-icon",template:'<div [ngClass]="divClass"><svg aria-hidden="true" [ngClass]="getIconClass()"><use [attr.xlink:href]="getSvgHRef()"></use></svg></div>'}),__metadata("design:paramtypes",[services_1.metadata])],e)}();exports.SystemIcon=SystemIcon;var SystemComponentContainer=function(){function SystemComponentContainer(){this.containerRef=new core_1.EventEmitter,this.containerComponent=""}return SystemComponentContainer.prototype.ngAfterViewInit=function(){this.containerRef.emit(this.container),this.containerRef.complete()},__decorate([core_1.ViewChild("container",{read:core_1.ViewContainerRef}),__metadata("design:type",core_1.ViewContainerRef)],SystemComponentContainer.prototype,"container",void 0),SystemComponentContainer=__decorate([core_1.Component({selector:"system-component-container",template:'<div *ngIf="!loaded" [title]="containerComponent" style="width:100%;" class="slds-align--absolute-center slds-p-around--xx-small"><system-spinner size="12"></system-spinner></div><ng-template #container></ng-template>'})],SystemComponentContainer)}();exports.SystemComponentContainer=SystemComponentContainer;var SystemDynamicComponent=function(){function e(e){this.metadata=e,this.component="",this.componentref=new core_1.EventEmitter}return e.prototype.ngAfterViewInit=function(){var t=this;this.metadata.addComponent(this.component,this.container).subscribe(function(e){t.componentref.emit(e)})},__decorate([core_1.ViewChild("container",{read:core_1.ViewContainerRef}),__metadata("design:type",core_1.ViewContainerRef)],e.prototype,"container",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"component",void 0),__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],e.prototype,"componentref",void 0),e=__decorate([core_1.Component({selector:"system-dynamic-component",template:"<div #container></div>"}),__metadata("design:paramtypes",[services_1.metadata])],e)}();exports.SystemDynamicComponent=SystemDynamicComponent;var SystemUtilityIcon=function(){function e(){this.icon="",this.size="",this.addclasses="",this.colorclass="slds-icon-text-default",this.title=""}return e.prototype.getSvgHRef=function(){return"./sldassets/icons/utility-sprite/svg/symbols.svg#"+this.icon},e.prototype.getIconClass=function(){return"slds-icon"+(this.size?" slds-icon--"+this.size:"")+" "+this.colorclass+" "+this.addclasses},__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"icon",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"size",void 0),__decorate([core_1.Input("class"),core_1.Input(),__metadata("design:type",String)],e.prototype,"addclasses",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"colorclass",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"title",void 0),e=__decorate([core_1.Component({selector:"system-utility-icon",template:'<div class="slds-icon_container slds-icon-text-error" [title]="title"><svg aria-hidden="true" [ngClass]="getIconClass()"><use [attr.xlink:href]="getSvgHRef()"></use></svg></div>'})],e)}();exports.SystemUtilityIcon=SystemUtilityIcon;var SystemStencil=function(){function e(){}return e=__decorate([core_1.Component({selector:"system-stencil",template:'<div class="slds-theme--shade" style="background-color:#e4e9f3; min-width:100px;">&nbsp;</div>'}),__metadata("design:paramtypes",[])],e)}();exports.SystemStencil=SystemStencil;var SystemTableStencils=function(){function e(){this.columns=1,this.rows=5,this.tools=!1,this.select=!1,this.colArray=[],this.rowArray=[]}return e.prototype.ngOnInit=function(){for(var e=1;this.rowArray.push(e),++e<=this.rows;);for(var t=1;this.colArray.push(t),++t<=this.columns;);},e.prototype.linestyle=function(e){return{opacity:.5+.5/e}},__decorate([core_1.Input(),__metadata("design:type",Number)],e.prototype,"columns",void 0),__decorate([core_1.Input(),__metadata("design:type",Number)],e.prototype,"rows",void 0),__decorate([core_1.Input(),__metadata("design:type",Boolean)],e.prototype,"tools",void 0),__decorate([core_1.Input(),__metadata("design:type",Boolean)],e.prototype,"select",void 0),e=__decorate([core_1.Component({selector:"[system-table-stencils]",template:'<tr *ngFor="let row of rowArray" [ngStyle]="linestyle(row)"><td *ngIf="select" class="slds-cell-shrink"></td><td *ngFor="let col of colArray"><system-stencil></system-stencil></td><td *ngIf="tools" class="slds-cell-shrink"></td></tr>'}),__metadata("design:paramtypes",[])],e)}();exports.SystemTableStencils=SystemTableStencils;var SystemSpinner=function(){function e(){this.size=0,this.border=0,this.inverse="false"}return Object.defineProperty(e.prototype,"spinnerStyle",{get:function(){var e={};return 0!=this.size&&(e.width=this.size+"px",e.height=this.size+"px"),0!=this.border&&(e["border-width"]=this.border+"px"),"true"==this.inverse&&(e["border-right-color"]="#fff",e["border-left-color"]="#fff",e["border-bottom-color"]="#fff"),e},enumerable:!0,configurable:!0}),__decorate([core_1.Input(),__metadata("design:type",Number)],e.prototype,"size",void 0),__decorate([core_1.Input(),__metadata("design:type",Number)],e.prototype,"border",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"inverse",void 0),e=__decorate([core_1.Component({selector:"system-spinner",template:'<div class="cssload-container"><div class="cssload-double-torus" [ngStyle]="spinnerStyle"></div></div>'})],e)}();exports.SystemSpinner=SystemSpinner;var SystemComponentMissing=function(){function SystemComponentMissing(){this.component=""}return SystemComponentMissing=__decorate([core_1.Component({selector:"system-component-missing",template:'<div class="slds-box slds-align_absolute-center slds-theme_alert-texture slds-theme_error">Component&nbsp;<b>{{component}}</b>&nbsp;Missing</div>'}),__metadata("design:paramtypes",[])],SystemComponentMissing)}();exports.SystemComponentMissing=SystemComponentMissing;var SystemDynamicRouteContainer=function(){function SystemDynamicRouteContainer(e,t){this.metadata=e,this.route=t,this.routercomponent=null}return SystemDynamicRouteContainer.prototype.ngAfterViewInit=function(){var t=this;if(!this.routercomponent){var e=this.metadata.getRouteComponent(this.route.snapshot.routeConfig.path);this.metadata.addComponent(e,this.componentcontainer).subscribe(function(e){t.routercomponent=e})}},__decorate([core_1.ViewChild("componentcontainer",{read:core_1.ViewContainerRef}),__metadata("design:type",core_1.ViewContainerRef)],SystemDynamicRouteContainer.prototype,"componentcontainer",void 0),SystemDynamicRouteContainer=__decorate([core_1.Component({selector:"system-dynamicroute-container",template:"<div #componentcontainer></div>"}),__metadata("design:paramtypes",[services_1.metadata,router_1.ActivatedRoute])],SystemDynamicRouteContainer)}();exports.SystemDynamicRouteContainer=SystemDynamicRouteContainer;var SystemTooltip=function(){function e(){this.tooltiptext="",this.displayHelp=!1}return e.prototype.toggleHelp=function(){this.displayHelp=!this.displayHelp},e.prototype.openHelp=function(){this.displayHelp=!0},e.prototype.closeHelp=function(){this.displayHelp=!1},__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"tooltiptext",void 0),e=__decorate([core_1.Component({selector:"system-tooltip",template:'<div class="slds-is-relative"><div class="slds-form-element"><div class="slds-form-element__icon slds-align-middle"><button class="slds-button slds-button_icon slds-button slds-button_icon" (mouseover)="openHelp()" (mouseout)="closeHelp()"><system-button-icon [icon]="\'info\'"></system-button-icon><span class="slds-assistive-text">Help</span></button></div></div><div *ngIf="displayHelp" class="slds-popover slds-popover_tooltip slds-nubbin_bottom-left slds-is-absolute" role="tooltip" style="word-wrap: break-word;white-space: normal;width: 300px;bottom: 30px;left: -15px;"><div class="slds-popover__body">{{tooltiptext}}</div></div></div>'})],e)}();exports.SystemTooltip=SystemTooltip;var SystemToastContainer=function(){function e(e){this.toast=e}return e.prototype.getToastClass=function(e,t){var s="";switch(t){case"alert":s="slds-notify--alert slds-theme--alert-texture ";break;default:s="slds-notify--toast "}switch(e){case"success":s+="slds-theme--success";break;case"warning":s+="slds-theme--warning";break;case"error":s+="slds-theme--error"}return s},e.prototype.getToastIcon=function(e){switch(e){case"success":return"success";case"warning":return"warning";case"error":return"error";default:return"info"}},e=__decorate([core_1.Component({selector:"system-toast-container",template:'<div class="slds-notify_container"><div *ngFor="let activeToast of toast.activeToasts" class="slds-notify" [ngClass]="getToastClass(activeToast.type, activeToast.theme)" role="alert"><button class="slds-button slds-notify__close slds-button--icon-inverse" (click)="toast.clearToast(activeToast.id)"><system-button-icon [icon]="\'close\'" [size]="\'large\'"></system-button-icon></button><div class="slds-notify__content slds-grid"><system-utility-icon [icon]="getToastIcon(activeToast.type)" [size]="\'small\'" [addclasses]="\'slds-m-right--small slds-col slds-no-flex\'" [colorclass]="\'slds-icon\'"></system-utility-icon><div class="slds-col slds-align-middle"><h2 class="slds-text-heading--small">{{activeToast.text}}</h2><p *ngIf="activeToast.description">{{activeToast.description}}</p></div></div></div></div>'}),__metadata("design:paramtypes",[services_2.toast])],e)}();exports.SystemToastContainer=SystemToastContainer;var SystemButtonIcon=function(){function e(e){this.metadata=e,this.icon="",this.sprite="utility",this.size="",this.module="",this.position="",this.inverse=!1,this.title=void 0}return e.prototype.getSvgHRef=function(){return"./sldassets/icons/"+this.getSprite()+"-sprite/svg/symbols.svg#"+this.getIcon()},e.prototype.getIcon=function(){if(this.icon)return this.icon;if(this.module&&this.metadata.getModuleIcon(this.module)){var e=this.metadata.getModuleIcon(this.module);return 0<e.indexOf(":")?e.split(":")[1]:e}return"empty"},e.prototype.getSprite=function(){return this.module&&this.metadata.getModuleIcon(this.module)&&0<this.metadata.getModuleIcon(this.module).indexOf(":")?this.metadata.getModuleIcon(this.module).split(":")[0]:this.sprite},e.prototype.getClass=function(){var e=[];return""!=this.size?e.push("slds-button__icon--"+this.size):e.push("slds-button__icon"),""!=this.position&&e.push("slds-button__icon_"+this.position),this.inverse&&e.push("slds-button_icon-inverse"),e},__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"icon",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"sprite",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"size",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"module",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"position",void 0),__decorate([core_1.Input(),__metadata("design:type",Boolean)],e.prototype,"inverse",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"title",void 0),e=__decorate([core_1.Component({selector:"system-button-icon",template:'<svg aria-hidden="true" class="slds-button__icon" [ngClass]="getClass()" [title]="title"><use [attr.xlink:href]="getSvgHRef()"></use></svg>'}),__metadata("design:paramtypes",[services_1.metadata])],e)}();exports.SystemButtonIcon=SystemButtonIcon;var SystemButtonGroup=function(){function e(e){this.metadata=e,this.items=[],this.action=new core_1.EventEmitter,this.isOpen=!1}return e.prototype.toggleOpen=function(){this.isOpen=!this.isOpen},__decorate([core_1.Input(),__metadata("design:type",Array)],e.prototype,"items",void 0),__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],e.prototype,"action",void 0),e=__decorate([core_1.Component({selector:"system-button-group",template:'<div class="slds-button-group" role="group"><button class="slds-button slds-button_neutral">Refresh</button><div class="slds-dropdown-trigger slds-dropdown-trigger_click slds-button_last" [ngClass]="{\'slds-is-open\': isOpen}"><button class="slds-button slds-button_icon slds-button_icon-border-filled" (click)="toggleOpen()"><system-button-icon icon="down"></system-button-icon></button><div class="slds-dropdown slds-dropdown_right slds-dropdown_actions"><ul class="slds-dropdown__list" role="menu"><li class="slds-dropdown__item" role="presentation"><a href="javascript:void(0);" role="menuitem" tabindex="0"><span class="slds-truncate" title="Overflow Item One">Overflow Item One</span></a></li><li class="slds-dropdown__item" role="presentation"><a href="javascript:void(0);" role="menuitem" tabindex="-1"><span class="slds-truncate" title="Overflow Item Two">Overflow Item Two</span></a></li><li class="slds-dropdown__item" role="presentation"><a href="javascript:void(0);" role="menuitem" tabindex="-1"><span class="slds-truncate" title="Overflow Item Three">Overflow Item Three</span></a></li></ul></div></div></div>'}),__metadata("design:paramtypes",[services_1.metadata])],e)}();exports.SystemButtonGroup=SystemButtonGroup;var SystemActionIcon=function(){function e(e){this.metadata=e,this.icon="",this.size="small",this.title=void 0}return Object.defineProperty(e.prototype,"svgHRef",{get:function(){return"./sldassets/icons/action-sprite/svg/symbols.svg#"+this.icon},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"iconClass",{get:function(){return this.icon?"slds-icon-action-"+this.icon.replace("_","-"):""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sizeClass",{get:function(){return"slds-icon--"+this.size},enumerable:!0,configurable:!0}),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"icon",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"size",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"title",void 0),e=__decorate([core_1.Component({selector:"system-action-icon",template:'<span class="slds-icon_container slds-icon-action-change-record-type slds-icon_container--circle" [ngClass]="iconClass"><svg class="slds-icon" [ngClass]="sizeClass" aria-hidden="true"><use [attr.xlink:href]="svgHRef"></use></svg></span>'}),__metadata("design:paramtypes",[services_1.metadata])],e)}();exports.SystemActionIcon=SystemActionIcon;var SystemConfirmDialog=function(){function SystemConfirmDialog(e){this.language=e,this.self={},this.answer=null,this.answerSubject=null,this.title="title",this.message="message",this.answerSubject=new rxjs_1.Subject,this.answer=this.answerSubject.asObservable()}return SystemConfirmDialog.prototype.ok=function(){this.answerSubject.next(!0),this.answerSubject.complete(),this.self.destroy()},SystemConfirmDialog.prototype.cancel=function(){this.answerSubject.next(!1),this.answerSubject.complete(),this.self.destroy()},SystemConfirmDialog=__decorate([core_1.Component({selector:"system-confirm-dialog",template:'<div class="slds-backdrop slds-backdrop--open"></div><div role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open"><div class="slds-modal__container"><div class="slds-modal__header"><h2 class="slds-text-heading--medium">{{title}}</h2></div><div class="slds-modal__content slds-p-around--medium">{{message}}</div><div class="slds-modal__footer"><button class="slds-button slds-button--neutral" (click)="cancel()">{{language.getLabel(\'LBL_CANCEL\')}}</button> <button class="slds-button slds-button--brand" (click)="ok()">{{language.getLabel(\'LBL_OK\')}}</button></div></div></div>',styles:[":host { position: relative; z-index: 9100; }"]}),__metadata("design:paramtypes",[services_3.language])],SystemConfirmDialog)}();exports.SystemConfirmDialog=SystemConfirmDialog;var SystemTinyMCE=function(){function e(e,t){var s=this;this.metadata=e,this.configurationService=t,this.elementid="mytinymce",this.height="250px",this.stylesheetId="",this.elementContent="new content",this.tinymceConfig={selector:"#"+this.elementid,remove_script_host:!0,relative_urls:!1,document_base_url:this.configurationService.getFrontendUrl(),menubar:!1,statusbar:!0,resize:!0,browser_spellcheck:!0,image_advtab:!0,paste_as_text:!0,paste_filter_drop:!0,plugins:["link","code","image","lists","paste","table"],toolbar:"undo redo | formatselect | styleselect bold italic removeformat | bullist numlist | link image table | code",skin_url:"vendor/tinymce/skins/lightgray",setup:function(t){(s.editor=t).on("keyup",function(){var e=t.getContent();s.content=e})},formats:{alignleft:{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",classes:"align-left"},aligncenter:{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",classes:"align-center"},alignright:{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",classes:"align-right"},alignjustify:{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",classes:"align-justify"},strikethrough:{inline:"del"}},style_formats:[{title:"Inline",items:[{title:"fett",icon:"bold",format:"bold"},{title:"kursiv",icon:"italic",format:"italic"},{title:"unterstrichen",icon:"underline",format:"underline"},{title:"strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"hochgestellt",icon:"superscript",format:"superscript"},{title:"tiefgestellt",icon:"subscript",format:"subscript"}]},{title:"Ausrichtung",items:[{title:"links",icon:"alignleft",format:"alignleft"},{title:"mittig",icon:"aligncenter",format:"aligncenter"},{title:"rechts",icon:"alignright",format:"alignright"},{title:"Blocksatz",icon:"alignjustify",format:"alignjustify"}]}],style_formats_merge:!1,body_class:"spice"},this.contentChange=new core_1.EventEmitter}return Object.defineProperty(e.prototype,"content",{get:function(){return this.elementContent},set:function(e){this.elementContent=e,this.contentChange.emit(this.elementContent)},enumerable:!0,configurable:!0}),e.prototype.setStylesheet=function(){var e=[];if(_.isEmpty(this.stylesheetId))delete this.tinymceConfig.content_style;else{if((e=this.metadata.getHtmlFormats(this.stylesheetId)).length){var t=0;this.tinymceConfig.block_formats="",this.tinymceConfig.extended_valid_elements=[],this.tinymceConfig.custom_elements=[],this.tinymceConfig.block_formats+="Absatz=p;",this.tinymceConfig.style_formats.push({title:"Weiteres",items:[]});for(var s=0,o=e;s<o.length;s++){var n=o[s];if(_.isEmpty(n.block))this.tinymceConfig.style_formats[2].items.push({title:n.name,inline:n.inline,classes:n.classes,styles:n.styles});else{t++;var i;this.tinymceConfig.formats[i="custom_format_"+t]={title:n.name,inline:n.inline,block:n.block,classes:n.classes,styles:n.styles,wrapper:Boolean(Number(n.wrapper))},this.tinymceConfig.block_formats+=n.name+"="+i+";",this.tinymceConfig.extended_valid_elements.indexOf(n.block)&&this.tinymceConfig.extended_valid_elements.push(n.block),this.tinymceConfig.custom_elements.indexOf(n.block)&&this.tinymceConfig.custom_elements.push(n.block)}}0===this.tinymceConfig.style_formats[2].items.length&&this.tinymceConfig.style_formats.splice(2,1)}this.tinymceConfig.content_style=this.metadata.getHtmlStylesheetCode(this.stylesheetId)}},e.prototype.updateevent=function(){this.content=this.editor.getContent()},e.prototype.getStyle=function(){return{height:this.height}},e.prototype.ngAfterViewInit=function(){var t=this;this.metadata.loadLibs("tinymce").subscribe(function(e){t.setStylesheet(),tinymce.init(t.tinymceConfig)})},e.prototype.ngOnDestroy=function(){tinymce.remove(this.editor)},e.prototype.ngOnInit=function(){this.tinymceConfig.selector="#"+this.elementid,this.tinymceConfig.document_base_url=this.configurationService.getFrontendUrl()},__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"elementid",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"height",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"stylesheetId",void 0),__decorate([core_1.Input(),__metadata("design:type",Object),__metadata("design:paramtypes",[Object])],e.prototype,"content",null),__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],e.prototype,"contentChange",void 0),e=__decorate([core_1.Component({selector:"system-tinymce",template:'<textarea id="{{elementid}}" [ngStyle]="getStyle()">{{content}}</textarea>',styles:[":host >>> .mce-ico{font-size: 12px; color: #54698d;}",":host >>> .mce-text{font-size: 12px; color: #54698d;}",":host >>> .mce-btn button{font-size: 12px; color: #54698d;}",":host >>> .mce-tinymce{border-radius: 4px}",":host >>> .mce-widget{font-family: 'Titillium Web', sans-serif;}"],host:{"(click)":"this.updateevent()","(keyup)":"this.updateevent()"}}),__metadata("design:paramtypes",[services_1.metadata,services_6.configurationService])],e)}();exports.SystemTinyMCE=SystemTinyMCE;var SystemTinyMCEModal=function(){function SystemTinyMCEModal(e){this.language=e,this.self={},this.content="",this.updateContent=new core_1.EventEmitter,this.title=""}return SystemTinyMCEModal.prototype.ngOnInit=function(){0===this.title.length&&(this.title=this.language.getLabel("LBL_EDITOR"))},SystemTinyMCEModal.prototype.closeModal=function(){this.self.destroy()},SystemTinyMCEModal.prototype.contentChange=function(e){this.content=e,this.updateContent.emit(e)},SystemTinyMCEModal=__decorate([core_1.Component({template:'<system-modal size="large"><system-modal-header (close)="closeModal()">{{title}}</system-modal-header><system-modal-content><system-tinymce [(content)]="content" [stylesheetId]="stylesheetId" [height]="\'80%\'" (contentChange)="contentChange($event)"></system-tinymce></system-modal-content><system-modal-footer><button class="slds-button slds-button--neutral" (click)="closeModal()">{{language.getLabel(\'LBL_OK\')}}</button></system-modal-footer></system-modal>'}),__metadata("design:paramtypes",[services_3.language])],SystemTinyMCEModal)}();exports.SystemTinyMCEModal=SystemTinyMCEModal;var SystemCaptureImage=function(){function SystemCaptureImage(e){this.backend=e,this.self={},this.model={},this.stream={},this.imageTaken=!1,this.response$=new core_1.EventEmitter}return SystemCaptureImage.prototype.ngAfterViewInit=function(){this.startstream()},SystemCaptureImage.prototype.startstream=function(){var t=this;navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&navigator.mediaDevices.getUserMedia({video:!0}).then(function(e){t.video.element.nativeElement.src=window.URL.createObjectURL(e),t.video.element.nativeElement.play(),t.stream=e})},SystemCaptureImage.prototype.stopstream=function(){this.stream.getVideoTracks()[0].stop()},SystemCaptureImage.prototype.capture=function(){var e=this.canvas.element.nativeElement.getContext("2d");document.getElementById("video");e.drawImage(this.video.element.nativeElement,0,0,1024,768),this.stopstream(),this.imageTaken=!0},SystemCaptureImage.prototype.discard=function(){this.video.element.nativeElement.play(),this.imageTaken=!1},SystemCaptureImage.prototype.send=function(){var t=this,e={filename:"xsxx.png",file:this.canvas.element.nativeElement.toDataURL().replace("data:image/png;base64,",""),filemimetype:"image/png"};this.backend.postRequest("/module/"+this.model.module+"/"+this.model.id+"/attachment",{},e).subscribe(function(e){t.response$.emit(e[0]),t.close()})},SystemCaptureImage.prototype.close=function(){this.self.destroy()},SystemCaptureImage.prototype.onModalEscX=function(){this.close()},__decorate([core_1.ViewChild("video",{read:core_1.ViewContainerRef}),__metadata("design:type",core_1.ViewContainerRef)],SystemCaptureImage.prototype,"video",void 0),__decorate([core_1.ViewChild("canvas",{read:core_1.ViewContainerRef}),__metadata("design:type",core_1.ViewContainerRef)],SystemCaptureImage.prototype,"canvas",void 0),SystemCaptureImage=__decorate([core_1.Component({selector:"system-capture-image",template:'<section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open"><div class="slds-modal__container" style="width:1048px;max-width: 100%;"><header class="slds-modal__header"><button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" (click)="close()"><system-button-icon [icon]="\'close\'" [size]="\'large\'"></system-button-icon></button><h2 class="slds-text-heading_medium slds-hyphenate">capture Image</h2></header><div class="slds-modal__content slds-p-around_medium" id="modal-content-id-1"><video #video [ngClass]="{\'slds-hide\': imageTaken}" width="1024" height="768" autoplay></video><canvas #canvas [ngClass]="{\'slds-hide\': !imageTaken}" width="1024" height="768"></canvas></div><footer class="slds-modal__footer"><button class="slds-button slds-button--neutral" (click)="close()">Cancel</button> <button *ngIf="!imageTaken" class="slds-button slds-button--brand" (click)="capture()">Capture</button><button *ngIf="imageTaken" class="slds-button slds-button--brand" (click)="send()">Use</button></footer></div></section>'}),__metadata("design:paramtypes",[services_4.backend])],SystemCaptureImage)}();exports.SystemCaptureImage=SystemCaptureImage;var SpeechRecognition=function(){function SpeechRecognition(e,t,s,o,n){this.language=e,this.metadata=t,this.toast=s,this.changeDetRef=o,this.applicationRef=n,this.debug=!1,this.recognition={},this.theText="",this.theTextNewest="",this.theTextHtml="",this.dirty=!1,this.errorOccurred=!1,this.isFinal=!1,this.toRestart=!1,this.recognizing=!1,this.cancelling=!1,this.stopping=!1,this.pausing=!1,this.working=!1,this.languages=[{id:"de_DE",name:"Deutsch"},{id:"en_US",name:"English"}],this.selectedLanguage=0}return SpeechRecognition.prototype.ngOnInit=function(){var n=this;window.chrome&&window.chrome.webstore||(this.toast.sendToast("Sorry, speech recognition is possible only with Google Chrome.","error"),this.self.destroy()),"de_DE"===this.language.currentlanguage?this.selectedLanguage=0:this.selectedLanguage=1,this.recognition=new(window.SpeechRecognition||window.webkitSpeechRecognition||window.mozSpeechRecognition||window.msSpeechRecognition),this.debug&&console.log("webspeech object: ",this.recognition),this.recognition.continuous=!0,this.recognition.lang=this.languages[this.selectedLanguage].id,this.recognition.interimResults=!0,this.recognition.maxAlternatives=1,this.part1fromField=this.textfield.element.nativeElement.value.substring(0,this.textfield.element.nativeElement.selectionStart),this.debug&&console.log("selection start/end: ",this.textfield.element.nativeElement.selectionStart,this.textfield.element.nativeElement.selectionEnd),this.part2fromField=this.textfield.element.nativeElement.value.substring(this.textfield.element.nativeElement.selectionEnd),this.recognition.onresult=function(e){n.debug&&console.log("result callback"),n.debug&&console.log("results: ",e.results),n.debug&&console.log("results length: ",e.results.length),n.debug&&console.log("result index: ",e.resultIndex),n.working=!0,n.changeDetRef.detectChanges();for(var t="",s=!0,o=0;o<e.results.length;++o)e.results[o].isFinal||(s=!1),n.debug&&console.log("isFinal"),n.debug&&console.log("Transcript",e.results[o][0].transcript),t+=e.results[o][0].transcript,n.debug&&console.log("dummy",t),n.theTextNewest=t;n.isFinal=s,n.isFinal&&(n.working=!1,n.changeDetRef.detectChanges()),n.debug&&console.log("theText: ",n.theText),!n.dirty&&n.theTextNewest&&(n.dirty=!0),n.dirty&&(n.theTextHtml="<p>"+n.linebreaks2html(n.capitalize(n.theText+" "+n.theTextNewest))+"</p>",n.changeDetRef.detectChanges())},this.recognition.onerror=function(e){switch(n.debug&&console.log("error callback: ",e.error),e.error){case"network":n.errorOccurred=!0,n.sendErrorToast(n.language.getLabel("MSG_NO_NETWORK"));break;case"no-speech":return void(n.stopping||n.recognition.stop());case"audio-capture":n.errorOccurred=!0,n.sendErrorToast(n.language.getLabel("MSG_NO_MICROPHONE"));break;case"not-allowed":n.errorOccurred=!0,e.timeStamp-n.start_timestamp<100?n.sendErrorToast(n.language.getLabel("LBL_BLOCKED")):n.sendErrorToast(n.language.getLabel("LBL_DENIED"))}n.applicationRef.tick()},this.recognition.onend=function(e){n.working=!1,n.cancelling?n.self.destroy():n.pausing?n.verwendeText():(n.debug&&console.log("callback onend"),n.close())},this.start()},SpeechRecognition.prototype.doRestart=function(){this.toRestart=!0,this.recognition.stop()},SpeechRecognition.prototype.verwendeText=function(){this.theText+=""===this.theText?this.capitalize(this.theTextNewest):this.theTextNewest,this.theTextNewest=""},SpeechRecognition.prototype.close=function(){if(this.verwendeText(),this.errorOccurred)""===this.theText&&""===this.theTextNewest&&this.self.destroy();else{if(!this.stopping)return this.recognition.start(),void(this.toRestart&&(this.toRestart=!1));this.recognizing=!1,this.textfield.element.nativeElement.value=this.part1fromField+this.theText+this.part2fromField,this.self.destroy()}},SpeechRecognition.prototype.start=function(e){void 0===e&&(e=null),this.recognizing||(this.recognizing=!0,this.recognition.start(),e&&(this.start_timestamp=e.timeStamp))},SpeechRecognition.prototype.buttonAcceptClose=function(){this.debug&&console.log("accept&close button"),this.stopping=!0,this.recognition.stop()},SpeechRecognition.prototype.buttonPause=function(){this.debug&&console.log("pause button"),this.pausing=!this.pausing,this.changeDetRef.detectChanges(),this.applicationRef.tick(),this.pausing&&this.recognition.stop(),!this.pausing&&this.recognition.start()},SpeechRecognition.prototype.buttonCancel=function(){this.recognition.stop(),this.cancelling=!0},SpeechRecognition.prototype.changeLang=function(e){this.selectedLanguage=e.target.selectedIndex,this.recognition.lang=this.languages[this.selectedLanguage].id,this.doRestart()},SpeechRecognition.prototype.capitalize=function(e){return 0===this.part1fromField.length?e.replace(/\S/,function(e){return e.toUpperCase()}):e},SpeechRecognition.prototype.linebreaks2html=function(e){return e.replace(/\n\n/g,"</p><p>").replace(/\n/g,"<br>")},SpeechRecognition.prototype.sendErrorToast=function(e){this.toast.sendToast(this.language.getLabel("ERR_SPEECH_RECOGNITION")+": "+e+".","error","",!1)},SpeechRecognition=__decorate([core_1.Component({template:'<div *ngIf="1 || !cancelling" role="dialog" class="slds-modal slds-fade-in-open slds-modal_large"><div class="slds-modal__container"><div class="slds-modal__header slds-theme--default"><h2 class="slds-text-heading--medium" style="position: relative">{{language.getLabel(\'LBL_SPEECH_RECOGNITION\')}} <span *ngIf="working" style="position:absolute;left:0; opacity: 0.5;">&#9678;</span> <span *ngIf="pausing" style="position:absolute;right:0; opacity: 0.5;">PAUSE</span></h2></div><div class="slds-modal__content slds-theme--default slds-p-around--medium slds-p-bottom--xx-small" style="margin-bottom:-0.75rem"><div *ngIf="!dirty" class="slds-text-align_center slds-m-vertical--x-large" style="margin-bottom:3rem" [style.visibility]="pausing ? \'hidden\':\'visible\'">{{language.getLabel(\'LBL_WAITING_START_SPEAKING\')}}</div><div *ngIf="dirty" [innerHTML]="theTextHtml" class="slds-text-longform"></div></div><div class="slds-modal__footer"><div class="slds-grid slds-grid_align-spread"><div class="slds-col"><div class="slds-select_container"><select class="slds-select" (change)="changeLang($event)"><option *ngFor="let lang of languages;let index=i" [value]="lang.id" [selected]="i == selectedLanguage">{{lang.name}}</option></select></div></div><div class="slds-col"><button class="slds-button slds-button--neutral" (click)="buttonCancel()">{{language.getLabel(\'LBL_CANCEL\')}}</button> <button class="slds-button slds-button--neutral" (click)="buttonPause()" [disabled]="cancelling"><ng-container *ngIf="!pausing"><system-button-icon [icon]="\'pause\'" [position]="\'left\'"></system-button-icon>{{language.getLabel(\'LBL_PAUSE\')}}</ng-container><ng-container *ngIf="pausing"><system-button-icon [icon]="\'record\'" [position]="\'left\'"></system-button-icon>{{language.getLabel(\'LBL_CONTINUE\')}}</ng-container></button> <button class="slds-button slds-button--brand" (click)="buttonAcceptClose($event)" [disabled]="!dirty || cancelling"><system-button-icon [icon]="\'stop\'" [position]="\'left\'"></system-button-icon>{{language.getLabel(\'LBL_ACCEPT\')}} &amp; {{language.getLabel(\'LBL_CLOSE\')}}</button></div></div></div></div></div>'}),__metadata("design:paramtypes",[services_3.language,services_1.metadata,services_2.toast,core_1.ChangeDetectorRef,core_1.ApplicationRef])],SpeechRecognition)}();exports.SpeechRecognition=SpeechRecognition;var PaginationControlsComponent=function(){function e(e){this.language=e,this._page=1,this.limit=1,this.total_records=0,this.variation="default",this.page$=new core_1.EventEmitter,this.offset=0,this.max_page=0}return Object.defineProperty(e.prototype,"page",{get:function(){return this._page},set:function(e){this._page=e,this.page$.emit(this._page)},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){0<this.total_records&&(this.max_page=Math.ceil(this.total_records/this.limit))},e.prototype.pageUp=function(){if(this.page>=this.max_page)return!1;this.page+=1},e.prototype.pageDown=function(){if(this.page<=1)return!1;this.page-=1},__decorate([core_1.Input("page"),__metadata("design:type",Object)],e.prototype,"_page",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"limit",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"total_records",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"variation",void 0),__decorate([core_1.Output("pageChange"),__metadata("design:type",Object)],e.prototype,"page$",void 0),e=__decorate([core_1.Component({selector:"pagination-controls",template:'<div [ngSwitch]="variation" class="slds-grid_align-center"><div *ngSwitchDefault><button class="slds-button slds-button_icon" [disabled]="page < 2" (click)="page = 1"><system-button-icon [icon]="\'chevronleft\'" title="go to first page"></system-button-icon><system-button-icon [icon]="\'chevronleft\'"></system-button-icon></button> <button class="slds-button slds-button_icon" [disabled]="page <= 1" (click)="pageDown()"><system-button-icon [icon]="\'chevronleft\'" title="go to previous page"></system-button-icon></button> <span>{{page}} {{language.getLabel(\'LBL_OF\')}} {{max_page}} {{language.getLabel(\'LBL_PAGES\')}} (showing up to {{limit}} {{language.getLabel(\'LBL_OF\')}} {{total_records}} {{language.getLabel(\'LBL_RECORDS\')}})</span> <button class="slds-button slds-button_icon" [disabled]="page >= max_page" (click)="pageUp()"><system-button-icon [icon]="\'chevronright\'" title="go to next page"></system-button-icon></button> <button class="slds-button slds-button_icon" [disabled]="page >= max_page-1" (click)="page = max_page"><system-button-icon [icon]="\'chevronright\'" title="go to last page"></system-button-icon><system-button-icon [icon]="\'chevronright\'"></system-button-icon></button></div><div *ngSwitchCase="\'short\'"><button class="slds-button slds-button_icon" [disabled]="page <= 1" (click)="pageDown()"><system-button-icon [icon]="\'chevronleft\'" title="go to previous page"></system-button-icon></button> <span>{{page}} {{language.getLabel(\'LBL_OF\')}} {{max_page}} {{language.getLabel(\'LBL_PAGES\')}}</span> <button class="slds-button slds-button_icon" [disabled]="page >= max_page" (click)="pageUp()"><system-button-icon [icon]="\'chevronright\'" title="go to next page"></system-button-icon></button></div></div>'}),__metadata("design:paramtypes",[services_3.language])],e)}();exports.PaginationControlsComponent=PaginationControlsComponent;var PaginationPipe=function(){function e(){}return e.prototype.transform=function(e,t){var s=(t.page-1)*t.limit,o=s+t.limit;return e.slice(s,o)},e=__decorate([core_1.Pipe({name:"paginate",pure:!1})],e)}();exports.PaginationPipe=PaginationPipe;var SystemPrompt=function(){function SystemPrompt(e){this.language=e,this.answer=null,this.answerSubject=null,this.self={},this.answerSubject=new rxjs_1.Subject,this.answer=this.answerSubject.asObservable()}return SystemPrompt.prototype.ngOnInit=function(){this.theme||(this.theme="shade")},SystemPrompt.prototype.ngAfterViewInit=function(){"confirm"===this.type?this.cancelButton.nativeElement.focus():"info"===this.type?this.okButton.nativeElement.focus():"input"===this.type&&this.inputField.nativeElement.focus()},SystemPrompt.prototype.clickOK=function(){"input"===this.type?this.answerSubject.next(this.value):this.answerSubject.next(!0),this.answerSubject.complete(),this.self.destroy()},SystemPrompt.prototype.clickCancel=function(){"info"!==this.type&&(this.answerSubject.next(!1),this.answerSubject.complete(),this.self.destroy())},SystemPrompt.prototype.keyPressed=function(e){27===e.keyCode&&this.clickCancel()},__decorate([core_1.Input(),__metadata("design:type",String)],SystemPrompt.prototype,"type",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],SystemPrompt.prototype,"text",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],SystemPrompt.prototype,"headertext",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],SystemPrompt.prototype,"theme",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],SystemPrompt.prototype,"value",void 0),__decorate([core_1.ViewChild("cancelButton"),__metadata("design:type",Object)],SystemPrompt.prototype,"cancelButton",void 0),__decorate([core_1.ViewChild("okButton"),__metadata("design:type",Object)],SystemPrompt.prototype,"okButton",void 0),__decorate([core_1.ViewChild("inputField"),__metadata("design:type",Object)],SystemPrompt.prototype,"inputField",void 0),SystemPrompt=__decorate([core_1.Component({selector:"system-prompt",template:'<section role="alertdialog" tabindex="-1" class="slds-modal slds-fade-in-open slds-modal_prompt"><div class="slds-modal__container"><header class="slds-modal__header slds-theme_{{theme}}" [style.height]="headertext ? \'auto\':\'1rem\'"><h2 *ngIf="headertext" class="slds-text-heading_medium slds-hyphenate">{{headertext}}</h2></header><div *ngIf="text || type === \'input\'" class="slds-modal__content slds-text-align_center"><div *ngIf="text" class="slds-m-vertical_medium">{{text}}</div><div *ngIf="type === \'input\'" class="slds-form-element slds-m-vertical_medium"><div class="slds-form-element__control"><input #inputField class="slds-input" type="text" [(ngModel)]="value"></div></div></div><footer class="slds-modal__footer"><button *ngIf="type !== \'info\'" #cancelButton class="slds-button slds-button--neutral" (click)="clickCancel()">{{language.getLabel(\'LBL_CANCEL\')}}</button> <button #okButton class="slds-button slds-button--brand" (click)="clickOK()">OK</button></footer></div></section>',host:{"( window:keydown )":"this.keyPressed( $event )"}}),__metadata("design:paramtypes",[services_3.language])],SystemPrompt)}();exports.SystemPrompt=SystemPrompt;var SystemModalWrapper=function(){function SystemModalWrapper(e,t){this.modalservice=e,this.application=t,this.self=null,this.escKey=!0}return SystemModalWrapper.prototype.closeModal=function(){this.self.destroy()},SystemModalWrapper.prototype.ngOnDestroy=function(){this.modalservice.removeModal(this.self),this.application.tick()},SystemModalWrapper.prototype.setEscKey=function(e){void 0===e&&(e=!0),this.escKey=e},__decorate([core_1.ViewChild("target",{read:core_1.ViewContainerRef}),__metadata("design:type",core_1.ViewContainerRef)],SystemModalWrapper.prototype,"target",void 0),SystemModalWrapper=__decorate([core_1.Component({selector:"system-modal-wrapper",template:'<div [style.zIndex]="zIndex" style="position:fixed"><span #target></span></div>'}),__metadata("design:paramtypes",[services_7.modal,core_1.ApplicationRef])],SystemModalWrapper)}();exports.SystemModalWrapper=SystemModalWrapper;var SystemLoadingModal=function(){function SystemLoadingModal(e){this.language=e,this.messagelabel="LBL_LOADING"}return SystemLoadingModal=__decorate([core_1.Component({template:'<section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open"><div class="slds-modal__container"><div class="slds-modal__content slds-p-around_medium"><div class="slds-align--absolute-center"><div class="slds-grid slds-grid--vertical-align-center"><system-spinner size="16"></system-spinner><div class="slds-p-left--small">{{language.getLabel(this.messagelabel)}}</div></div></div></div></div></section>'}),__metadata("design:paramtypes",[services_3.language])],SystemLoadingModal)}();exports.SystemLoadingModal=SystemLoadingModal;var SystemLink=function(){function e(){this.click=new core_1.EventEmitter}return e.prototype.clicked=function(e){this.click.emit(e)},__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],e.prototype,"click",void 0),e=__decorate([core_1.Component({selector:"system-link",template:'<span class="slds-text-link_reset" (click)="clicked($event)"><ng-content></ng-content></span>'}),__metadata("design:paramtypes",[])],e)}();exports.SystemLink=SystemLink;var SystemModal=function(){function e(e){this.metadata=e,this.size=""}return Object.defineProperty(e.prototype,"sizeClass",{get:function(){return this.size?"slds-modal_"+this.size:""},enumerable:!0,configurable:!0}),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"size",void 0),e=__decorate([core_1.Component({selector:"system-modal",template:'<section role="dialog" class="slds-modal slds-fade-in-open" [ngClass]="sizeClass"><div class="slds-modal__container"><ng-content select="system-modal-header"></ng-content><ng-content select="system-modal-content"></ng-content><ng-content select="system-modal-footer"></ng-content></div></section>'}),__metadata("design:paramtypes",[services_1.metadata])],e)}();exports.SystemModal=SystemModal;var SystemModalHeader=function(){function e(e){this.metadata=e,this.module="",this.close=new core_1.EventEmitter}return __decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"module",void 0),__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],e.prototype,"close",void 0),e=__decorate([core_1.Component({selector:"system-modal-header",template:'<header class="slds-modal__header slds-theme--shade"><button class="slds-button slds-button_icon slds-modal__close slds-button--icon-inverse" (click)="close.emit(true)"><system-button-icon [icon]="\'close\'" [size]="\'large\'"></system-button-icon><span class="slds-assistive-text">Close</span></button><div class="slds-grid slds-grid--align-spread"><div class="slds-media__figure slds-m-right_x-small"><span *ngIf="module" class="slds-icon_container"><system-icon [module]="module" size="small"></system-icon></span> <span *ngIf="icon" class="slds-icon_container"><system-icon [icon]="module" [sprite]="sprite" size="small"></system-icon></span></div><h2 class="slds-text-heading_medium slds-hyphenate"><ng-content></ng-content></h2><div></div></div></header>'}),__metadata("design:paramtypes",[services_1.metadata])],e)}();exports.SystemModalHeader=SystemModalHeader;var SystemModalContent=function(){function e(e){this.metadata=e,this.margin="medium",this.grow=!1}return Object.defineProperty(e.prototype,"marginclass",{get:function(){var e="slds-modal__content";return""!=this.margin&&(e+=" slds-p-around--"+this.margin),this.grow&&(e+=" slds-grow"),e},enumerable:!0,configurable:!0}),__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"margin",void 0),__decorate([core_1.Input(),__metadata("design:type",Boolean)],e.prototype,"grow",void 0),e=__decorate([core_1.Component({selector:"system-modal-content",template:"<ng-content></ng-content>",host:{"[class]":"this.marginclass"}}),__metadata("design:paramtypes",[services_1.metadata])],e)}();exports.SystemModalContent=SystemModalContent;var SystemModalFooter=function(){function e(e){this.metadata=e}return e=__decorate([core_1.Component({selector:"system-modal-footer",template:'<footer class="slds-modal__footer"><ng-content></ng-content></footer>'}),__metadata("design:paramtypes",[services_1.metadata])],e)}();exports.SystemModalFooter=SystemModalFooter;var SystemCollabsableTab=function(){function e(e){this.language=e,this.expanded=!0,this.title=""}return e.prototype.togglePanel=function(){this.expanded=!this.expanded},e.prototype.getChevronStyle=function(){if(!this.expanded)return{transform:"rotate(45deg)","margin-top":"4px"}},e.prototype.getTabStyle=function(){if(!this.expanded)return{height:"0px",transform:"rotateX(90deg)"}},__decorate([core_1.Input(),__metadata("design:type",Boolean)],e.prototype,"expanded",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"title",void 0),e=__decorate([core_1.Component({selector:"system-collapsable-tab",template:'<div class="slds-section" [ngClass]="{\'slds-is-open\': expanded}"><h3 *ngIf="title != \'\'" class="slds-section__title"><button aria-controls="expando-unique-id" aria-expanded="true" class="slds-button slds-section__title-action" (click)="togglePanel()"><system-utility-icon icon="switch" size="x-small" addclasses="slds-section__title-action-icon slds-button__icon slds-button__icon_left"></system-utility-icon><span class="slds-truncate" title="Section Title">{{language.getLabel(title)}}</span></button></h3><div [ngStyle]="getTabStyle()"><ng-content></ng-content></div></div>'}),__metadata("design:paramtypes",[services_3.language])],e)}();exports.SystemCollabsableTab=SystemCollabsableTab;var SystemCustomIcon=function(){function e(e){this.metadata=e,this.icon="",this.file="./assets/icons/spicecrm.svg",this.size="",this.addclasses="",this.divClass="slds-media__figure"}return e.prototype.getSizeClass=function(){return this.size?"slds-icon--"+this.size:""},e.prototype.getSvg=function(){return this.file+"#"+this.icon},e.prototype.getIconClass=function(){return"slds-icon"+(this.size?" slds-icon--"+this.size:"")+" slds-icon-text-default "+this.addclasses},__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"icon",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"file",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"size",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"addclasses",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"divClass",void 0),e=__decorate([core_1.Component({selector:"system-custom-icon",template:'<div class="slds-p-horizontal--xxx-small"><svg aria-hidden="true" [ngClass]="getIconClass()"><use [attr.xlink:href]="getSvg()"></use></svg></div>'}),__metadata("design:paramtypes",[services_1.metadata])],e)}();exports.SystemCustomIcon=SystemCustomIcon;var SystemCheckbox=function(){function e(e){this.language=e,this.id=_.uniqueId(),this._value="1",this._checked=!1,this.disabled=!1,this.click$=new core_1.EventEmitter,this.check$=new core_1.EventEmitter,this.uncheck$=new core_1.EventEmitter,this.onChange=function(e){},this.onTouched=function(){}}var t;return t=e,Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(e){this._value=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"model_value",{get:function(){return this._model_value},set:function(e){e!=this._model_value&&this.onChange(e),this.writeValue(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"checked",{get:function(){return this._checked},set:function(e){this._checked=e},enumerable:!0,configurable:!0}),e.prototype.click=function(){if(this.disabled)return!1;this.onTouched(),this.checked=!this.checked,this.click$.emit(this.checked),this.checked?this.check$.emit():this.uncheck$.emit()},e.prototype.registerOnChange=function(t){this.onChange=function(e){t(e)}},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.setDisabledState=function(e){this.disabled=e},e.prototype.writeValue=function(e){this.disabled||(this._model_value=e,this.model_value&&!this.checked?this.checked=!0:!this.model_value&&this.checked&&(this.checked=!1))},__decorate([core_1.Input(),__metadata("design:type",Object),__metadata("design:paramtypes",[Object])],e.prototype,"value",null),__decorate([core_1.Input(),__metadata("design:type",Boolean),__metadata("design:paramtypes",[Boolean])],e.prototype,"checked",null),__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"disabled",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"label",void 0),__decorate([core_1.Output("toggle"),core_1.Output("click"),__metadata("design:type",Object)],e.prototype,"click$",void 0),__decorate([core_1.Output("check"),__metadata("design:type",Object)],e.prototype,"check$",void 0),__decorate([core_1.Output("uncheck"),__metadata("design:type",Object)],e.prototype,"uncheck$",void 0),e=t=__decorate([core_1.Component({selector:"system-checkbox",template:'<span class="slds-checkbox"><input type="checkbox" id="checkbox-{{id}}" [attr.aria-labelledby]="\'checkbox-button-label-\'+id+\' check-group-header\'" (click)="click()" [disabled]="disabled" [checked]="checked" [value]="value" [(ngModel)]="model_value"> <label class="slds-checkbox__label" for="checkbox-{{id}}" id="checkbox-button-label-{{id}}"><span class="slds-checkbox_faux"></span> <span class="slds-form-element__label"><ng-content></ng-content></span></label></span>',providers:[{provide:forms_1.NG_VALUE_ACCESSOR,useExisting:core_1.forwardRef(function(){return t}),multi:!0}]}),__metadata("design:paramtypes",[services_3.language])],e)}();exports.SystemCheckbox=SystemCheckbox;var SystemCard=function(){function e(e){this.language=e,this.collapsible=!0,this.collapsed=!1,this.collapsed$=new core_1.EventEmitter}return e.prototype.toggleCollapsed=function(){if(console.log(this.collapsible),!this.collapsible)return!1;this.collapsed=!this.collapsed,this.collapsed$.emit(this.collapsed)},__decorate([core_1.Input("class"),__metadata("design:type",String)],e.prototype,"additional_css_classes",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"header_icon",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"actionset_id",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"collapsible",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"collapsed",void 0),__decorate([core_1.Output("collapsedChange"),__metadata("design:type",Object)],e.prototype,"collapsed$",void 0),e=__decorate([core_1.Component({selector:"system-card",template:'<article class="slds-card {{additional_css_classes}}"><div class="slds-card__header slds-grid"><header class="slds-media slds-media_center slds-has-flexi-truncate"><div *ngIf="header_icon" class="slds-media__figure"><span class="slds-icon_container slds-icon-standard-account" title="account"><system-icon icon="{{header_icon}}"></system-icon></span></div><div class="slds-media__body" (click)="toggleCollapsed()"><h2 class="slds-card__header-title"><span class="slds-text-heading_small"><ng-content select="system-card-header-title"></ng-content></span></h2></div><div *ngIf="actionset_id" class="slds-no-flex"></div></header></div><div class="slds-card__body slds-card__body_inner"><ng-content select="system-card-body"></ng-content></div><footer class="slds-card__footer"><ng-content select="system-card-footer"></ng-content></footer></article>'}),__metadata("design:paramtypes",[services_3.language])],e)}();exports.SystemCard=SystemCard;var SystemCardHeaderTitle=function(){function e(){}return e=__decorate([core_1.Directive({selector:"system-card-header-title"})],e)}();exports.SystemCardHeaderTitle=SystemCardHeaderTitle;var SystemCardBody=function(){function e(){}return e=__decorate([core_1.Directive({selector:"system-card-body"})],e)}();exports.SystemCardBody=SystemCardBody;var SystemCardFooter=function(){function e(){}return e=__decorate([core_1.Directive({selector:"system-card-footer"})],e)}();exports.SystemCardFooter=SystemCardFooter;var SystemTree=function(){function e(){this.selectedItem$=new core_1.EventEmitter,this.treelistChange$=new core_1.EventEmitter,this.addItem$=new core_1.EventEmitter,this.treelist=[],this.selectedItem="",this.tree=[],this.treeConfig={draggable:!1,canadd:!1,clickable:!1,expandall:!1,collapsible:!0}}return Object.defineProperty(e.prototype,"config",{get:function(){return this.treeConfig},set:function(e){this.treeConfig.draggable=e.draggable||!1,this.treeConfig.canadd=e.canadd||!1,this.treeConfig.clickable=e.clickable||!1,this.treeConfig.expandall=e.expandall||!1,this.treeConfig.collapsible=e.collapsible||!0},enumerable:!0,configurable:!0}),e.prototype.ngOnChanges=function(e){this.resetTreelist(),this.tree=this.buildTree(this.treelist)},e.prototype.resetTreelist=function(){this.treelist.map(function(e){return""!==e.parent_id&&void 0!==e.parent_id||(e.parent_id=null),e.parent_name="",e=_.omit(e,"path","level","children")})},e.prototype.buildTree=function(e,t,s,o){void 0===t&&(t=null),void 0===s&&(s=0),void 0===o&&(o=[]);for(var n=[],i=0,a=e;i<a.length;i++){var r=a[i];if(r.parent_id===t){r.expanded=!this.config.collapsible||this.config.expandall,r.clickable=this.config.clickable,r.level=s+1,r.path=o.slice(),r.path[s]=r.id;var l=this.buildTree(e,r.id,s+1,r.path);delete r.path[s+1],l.length?r.children=l:r.children=[];for(var c=0,d=l;c<d.length;c++){var p=d[c];(p.id===this.selectedItem||p.expanded)&&(r.expanded=!0)}n.push(r)}}return n},e.prototype.handleSelectItemEvent=function(e){this.selectedItem$.emit(e)},e.prototype.handleAddEvent=function(e){this.addItem$.emit(e)},e.prototype.handleDragDropEvent=function(t){for(var e={},s=!0,o=0,n=this.treelist;o<n.length;o++){var i=n[o];i.id===t.child&&1===i.level&&(s=!1),i.id===t.parent&&i.path.includes(t.child)&&(s=!1)}s&&(e.id=t.child,e.parent_id=t.parent,e.parent_name=this.treelist.find(function(e){return e.id===t.parent}).name,this.treelistChange$.emit(e))},__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],e.prototype,"selectedItem$",void 0),__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],e.prototype,"treelistChange$",void 0),__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],e.prototype,"addItem$",void 0),__decorate([core_1.Input(),__metadata("design:type",Array)],e.prototype,"treelist",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"selectedItem",void 0),__decorate([core_1.Input(),__metadata("design:type",Object),__metadata("design:paramtypes",[Object])],e.prototype,"config",null),e=__decorate([core_1.Component({selector:"system-tree",template:'<div role="listbox"><ul class="slds-tree" role="tree" aria-labelledby="treeheading"><system-tree-item [items]="tree" [config]="config" [selectedItem]="selectedItem" (addItem$)="handleAddEvent($event)" (treelistChange$)="handleDragDropEvent($event)" (selectedItem$)="handleSelectItemEvent($event)"></system-tree-item></ul></div><div *ngIf="config.canadd" class="slds-grid slds-align-content-center slds-border--top slds-m-top--x-small slds-p-top--x-small"><button class="slds-button slds-button--neutral slds-p-around--xx-small" (click)="handleAddEvent(null)" style="border-radius: 50%;"><system-button-icon [icon]="\'add\'" [size]="\'small\'"></system-button-icon></button></div>'})],e)}();exports.SystemTree=SystemTree;var SystemTreeItem=function(){function e(e){this.renderer=e,this.selectedItem$=new core_1.EventEmitter,this.treelistChange$=new core_1.EventEmitter,this.addItem$=new core_1.EventEmitter,this.selectedItem="",this.items=[],this.config={}}return e.prototype.expand=function(e,t){t&&(t.expanded=!t.expanded,e.stopPropagation())},e.prototype.addItem=function(e,t,s){this.handleAddEvent({id:t,name:s}),e.stopPropagation()},e.prototype.handleAddEvent=function(e){this.addItem$.emit(e)},e.prototype.selectItem=function(e,t){this.selectedItem$.emit(t),e.stopPropagation()},e.prototype.handleSelectItemEvent=function(e){this.selectedItem$.emit(e)},e.prototype.dragItem=function(e,t){this.config.draggable&&(e.dataTransfer.setDragImage(this.renderer.createElement("div"),0,0),e.dataTransfer.setData("itemId",t),e.stopPropagation())},e.prototype.onDragging=function(e){this.config.draggable&&(this.renderer.setStyle(e.target,"border","1px solid red"),e.preventDefault())},e.prototype.onDragLeave=function(e){this.config.draggable&&this.renderer.removeStyle(e.target,"border")},e.prototype.dropItem=function(e,t){if(this.config.draggable){this.renderer.removeStyle(e.target,"border");var s=e.dataTransfer.getData("itemId");s&&s!==t&&this.handleDragDropEvent({child:s,parent:t}),e.dataTransfer.clearData(),e.preventDefault(),e.stopPropagation()}},e.prototype.handleDragDropEvent=function(e){this.treelistChange$.emit(e)},__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],e.prototype,"selectedItem$",void 0),__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],e.prototype,"treelistChange$",void 0),__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],e.prototype,"addItem$",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"selectedItem",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"items",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"config",void 0),e=__decorate([core_1.Component({selector:"system-tree-item",template:'<li *ngFor="let item of items" role="treeitem" [attr.aria-level]="item.level" [draggable]="config.draggable && item.level > 1" (dragstart)="dragItem($event, item.id)" (dragover)="onDragging($event)" (dragleave)="onDragLeave($event)" (drop)="dropItem($event, item.id)" (click)="selectItem($event, item.id)"><div class="slds-tree__item slds-is-open slds-grid slds-grid--align-spread slds-grid_vertical-align-center" title="{{\'Level \' + item.level}}" [ngClass]="selectedItem == item.id ? \'slds-is-selected\': \'\'"><div class="slds-grid slds-grid_vertical-align-center"><div style="min-width: 16px"><button *ngIf="item.children.length > 0 && config.collapsible" class="slds-button slds-button_icon slds-m-right--xx-small slds-m-top--none" aria-expanded="true" aria-hidden="true" tabindex="-1" (click)="expand($event, item)"><system-button-icon [icon]="item.expanded ? \'chevrondown\' : \'chevronright\'" [size]="\'xx-small\'"></system-button-icon></button><system-utility-icon *ngIf="!config.collapsible" [icon]="config.icon || \'record\'" [size]="\'xx-small\'" [addclasses]="\'slds-p-around--xxx-small slds-m-right--xx-small\'"></system-utility-icon></div><div><span *ngIf="item.clickable" class="slds-tree__item-label slds-truncate">{{item.name}}</span> <span *ngIf="!item.clickable" (click)="expand(item)" style="opacity: 0.8; cursor: default;" class="slds-tree__item-label slds-truncate">{{item.name}}</span></div></div><div *ngIf="config.canadd && item.id == selectedItem" class="slds-m-right--xx-small"><button class="slds-button slds-button_icon slds-m-top--none" (click)="addItem($event, item.id, item.name)"><system-button-icon [icon]="\'add\'" [size]="\'xx-small\'"></system-button-icon></button></div></div><ul *ngIf="item.children.length > 0 && item.expanded == true" class="slds-tree" role="tree" aria-labelledby="treeheading"><system-tree-item [config]="config" [items]="item.children" [selectedItem]="selectedItem" (addItem$)="handleAddEvent($event)" (treelistChange$)="handleDragDropEvent($event)" (selectedItem$)="handleSelectItemEvent($event)"></system-tree-item></ul></li>'}),__metadata("design:paramtypes",[core_1.Renderer2])],e)}();exports.SystemTreeItem=SystemTreeItem;var SystemSelect=function(){function e(e,t,s){this.elementRef=e,this.renderer=t,this.language=s,this.selectList=[],this.label="",this.disabled=!1,this.selectedOutputItem=new core_1.EventEmitter,this.searchList=[],this.show_list=!1,this.inputValue="",this.selectedItemId=""}return e.prototype.ngOnChanges=function(e){if(void 0!==e.selectList){var t=this.listBuilder(this.selectList);this.searchList=t}void 0!==e.selectedItem&&this.selectedItem&&(this.inputValue=this.selectedItem.name,this.selectedItemId=this.selectedItem.id)},e.prototype.onKeydown=function(e){this.searchList=[];var t=this.copyList();for(var s in t)for(var o=0,n=t[s];o<n.length;o++){var i=n[o],a=i.name.toLowerCase(),r=e.target.value.toLowerCase(),l=a.search(r);if(-1<l){if(0<r.length){var c=[i.name.slice(0,l),"<mark>",i.name.slice(l,l+e.target.value.length),"</mark>",i.name.slice(l+e.target.value.length)].join("");i.name=c}this.searchList[s]||(this.searchList[s]=[]),this.searchList[s].push(i)}}},e.prototype.listBuilder=function(e){for(var t=[],s=0,o=e;s<o.length;s++){var n=o[s];if(n.hasOwnProperty("group"))t[n.group]||(t[n.group]=[]);else{var i="_undefined";t[n.group=i]||(t[i]=[])}t[n.group].push({id:n.id,name:n.name})}return t},e.prototype.copyList=function(){var e=[],t=this.listBuilder(this.selectList);for(var s in t){e[s]=[];for(var o=0,n=t[s].length;o<n;o++)for(var i in e[s][o]=[],t[s][o])e[s][o][i]=t[s][o][i]}return e},e.prototype.clickOnSearch=function(e){this.elementRef.nativeElement.contains(e.target)||(this.show_list=!1)},e.prototype.onFocus=function(){var t=this;this.show_list=!0,this.clickListener=this.renderer.listen("document","click",function(e){return t.clickOnSearch(e)})},e.prototype.itemClicked=function(e){var t;this.show_list=!1;for(var s=0,o=this.selectList;s<o.length;s++){var n=o[s];n.id==e.id&&(t=n,this.inputValue=n.name,this.selectedItemId=n.id)}this.selectedOutputItem.emit(t)},__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"selectList",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"label",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"selectedItem",void 0),__decorate([core_1.Input(),__metadata("design:type",Boolean)],e.prototype,"disabled",void 0),__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],e.prototype,"selectedOutputItem",void 0),e=__decorate([core_1.Component({selector:"system-select",template:'<div class="slds-form-element slds-size_2-of-2"><label class="slds-form-element__label" for="combobox-id-14">{{language.getAppLanglabel(label)}}</label><div class="slds-form-element__control slds-size_2-of-2"><div class="slds-combobox_container"><div class="slds-combobox slds-dropdown-trigger slds-dropdown-trigger_click slds-is-open" aria-expanded="true" aria-haspopup="listbox" role="combobox"><div class="slds-combobox__form-element slds-input-has-icon slds-input-has-icon_right" role="none"><input (focus)="onFocus()" type="text" [attr.disabled]="disabled ? \'disabled\' : null" class="slds-input slds-combobox__input slds-combobox__input-value" id="combobox-id-14" aria-autocomplete="list" aria-controls="listbox-id-11" autoComplete="off" role="textbox" placeholder="{{language.getAppLanglabel(\'LBL_SEARCH\')}}" value="{{inputValue}}" (keyup)="onKeydown($event)"> <span class="slds-icon_container slds-icon-utility-search slds-input__icon slds-input__icon_right"><svg class="slds-icon slds-icon slds-icon_x-small slds-icon-text-default" aria-hidden="true"><use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#search"></use></svg></span></div><div *ngIf="show_list" class="slds-dropdown slds-dropdown_length-5 slds-dropdown_fluid" role="listbox"><ul class="slds-listbox slds-listbox_vertical" role="presentation"><ng-container *ngFor="let selectItem of searchList | keyvalue"><li *ngIf="selectItem.key != \'_undefined\'" role="presentation"><div class="slds-border_bottom slds-border_top slds-p-left_small" style="background-color: #ecebea;"><span class="slds-truncate size-xx-small" style="font-weight: bold; font-size: 12px;">{{selectItem.key}}</span></div></li><li *ngFor="let selectItem of selectItem.value" role="presentation" class="slds-listbox__item" (click)="itemClicked(selectItem)"><div id="{{selectItem.id}}" [ngClass]="{\'slds-has-focus\': selectedItemId == selectItem.id}" class="slds-media slds-listbox__option slds-listbox__option_plain slds-media_small" role="option"><span class="slds-media__body"><span class="slds-truncate" value="selectItem.id"><p [innerHTML]="selectItem.name"></p></span></span></div></li></ng-container></ul></div></div></div></div></div>'}),__metadata("design:paramtypes",[core_1.ElementRef,core_1.Renderer2,services_3.language])],e)}();exports.SystemSelect=SystemSelect;var SystemCheckboxGroup=function(){function e(){}var t;return t=e,Object.defineProperty(e.prototype,"model",{get:function(){return this._model},set:function(e){this._model=e,this.onChange(this._model)},enumerable:!0,configurable:!0}),e.prototype.writeValue=function(e){this._model=e},e.prototype.registerOnChange=function(e){this.onChange=e},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.toggleValue=function(e){this.contains(e)?this.remove(e):this.add(e)},e.prototype.contains=function(e){return this._model instanceof Array?-1<this._model.indexOf(e):!!this._model&&this._model===e},e.prototype.add=function(e){this._model instanceof Array?this._model.push(e):this._model=[e],this.onChange(this._model)},e.prototype.remove=function(e){var t=this._model.indexOf(e);!this._model||t<0||(this._model.splice(t,1),this.onChange(this._model))},e=t=__decorate([core_1.Component({selector:"system-checkbox-group",template:"<ng-content></ng-content>",providers:[{provide:forms_1.NG_VALUE_ACCESSOR,useExisting:core_1.forwardRef(function(){return t}),multi:!0}]})],e)}();exports.SystemCheckboxGroup=SystemCheckboxGroup;var SystemCheckboxGroupCheckbox=function(){function e(e){this.grp=e,this.id=_.uniqueId(),this.disabled=!1,this._checked=!1}return Object.defineProperty(e.prototype,"checked",{get:function(){return this._checked},set:function(e){this._checked=e},enumerable:!0,configurable:!0}),e.prototype.toggle=function(){this.checked=!this.checked,this.grp.toggleValue(this.value)},e.prototype.ngOnChanges=function(){this._checked=this.grp.contains(this.value)},__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"value",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],e.prototype,"disabled",void 0),__decorate([core_1.Input(),__metadata("design:type",Boolean),__metadata("design:paramtypes",[Boolean])],e.prototype,"checked",null),e=__decorate([core_1.Component({selector:"system-checkbox-group-checkbox",template:'\n        <span class="slds-checkbox">\n            <input type="checkbox" id="checkbox-group-checkbox-{{id}}" [attr.aria-labelledby]="\'checkbox-group-checkbox-button-label-\'+id+\' check-group-header\'" [disabled]="disabled" [checked]="checked" (click)="toggle()" />\n            <label class="slds-checkbox__label" for="checkbox-group-checkbox-{{id}}" id="checkbox-group-checkbox-button-label-{{id}}">\n                <span class="slds-checkbox_faux"></span>\n                <span class="slds-form-element__label"><ng-content></ng-content></span>\n            </label>\n        </span>'}),__param(0,core_1.Host()),__metadata("design:paramtypes",[SystemCheckboxGroup])],e)}();exports.SystemCheckboxGroupCheckbox=SystemCheckboxGroupCheckbox;var SystemSection=function(){function e(e){this.language=e,this.title="",this.expanded=!0}return e.prototype.togglePanel=function(){this.expanded=!this.expanded},e.prototype.getTabStyle=function(){if(!this.expanded)return{height:"0px",transform:"rotateX(90deg)"}},__decorate([core_1.Input(),__metadata("design:type",String)],e.prototype,"title",void 0),__decorate([core_1.Input(),__metadata("design:type",Boolean)],e.prototype,"expanded",void 0),e=__decorate([core_1.Component({selector:"system-section",template:'<div class="slds-section" [ngClass]="{\'slds-is-open\': expanded}"><h3 *ngIf="title" class="slds-section__title"><button aria-controls="expando-unique-id" aria-expanded="true" class="slds-button slds-section__title-action" (click)="togglePanel()"><system-utility-icon [icon]="\'switch\'" [size]="\'x-small\'" [addclasses]="\'slds-section__title-action-icon slds-button__icon slds-button__icon_left\'"></system-utility-icon><span class="slds-truncate" title="Section Title">{{language.getLabel(title)}}</span></button></h3><div [ngStyle]="getTabStyle()"><ng-content></ng-content></div></div>'}),__metadata("design:paramtypes",[services_3.language])],e)}();exports.SystemSection=SystemSection;var SystemRichTextEditor=function(){function e(e,t,s,o,n){this.modal=e,this.renderer=t,this.editorService=s,this._document=o,this.elementRef=n,this._html="",this.isActive=!1,this.modalOpen=!1,this.block="default",this.fontName="Tilium Web",this.fontSize="5",this.tagMap={BLOCKQUOTE:"indent",A:"link"},this.select=["H1","H2","H3","H4","H5","H6","P","PRE","DIV"]}var t;return(t=e).prototype.ngOnDestroy=function(){this.clickListener&&this.clickListener()},e.prototype.executeCommand=function(e){switch(e){case"openSourceEditor":this.openSourceEditor();break;case"openEditorModal":this.openEditorModal();break;case"openMediaFilePicker":this.openMediaFilePicker();break;default:this.isActive&&""!=e&&this.editorService.executeCommand(e),this.exec()}},e.prototype.onEditorClick=function(){var t=this;this.isActive||(this.htmlEditor.nativeElement.focus(),this.isActive=!0,this.clickListener=this.renderer.listen("document","click",function(e){return t.onDocumentClick(e)}))},e.prototype.onDocumentClick=function(e){this.modalOpen||this.elementRef.nativeElement.contains(e.target)||(this.isActive=!1,this.clickListener())},e.prototype.onContentChange=function(e){"function"==typeof this.onChange&&this.onChange(e),this._html=e},e.prototype.registerOnChange=function(e){this.onChange=e},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.writeValue=function(e){this._html=e||"",this.renderer.setProperty(this.htmlEditor.nativeElement,"innerHTML",this._html)},e.prototype.exec=function(){var e;window.getSelection&&(e=window.getSelection());for(var t=e.focusNode,s=[];t&&"editor"!==t.id;)s.unshift(t),t=t.parentNode;this.triggerBlocks(s)},e.prototype.openEditorModal=function(){this.modal.openModal("SystemTinyMCEModal").subscribe(function(e){})},e.prototype.openMediaFilePicker=function(){var t=this;this.modalOpen=!0,this.modal.openModal("MediaFilePicker").subscribe(function(e){e.instance.answer.subscribe(function(e){e&&e.upload?t.modal.openModal("MediaFileUploader").subscribe(function(e){e.instance.answer.subscribe(function(e){e&&t.editorService.insertImage("https://cdn.spicecrm.io/"+e),t.modalOpen=!1})}):(e&&e.id&&t.editorService.insertImage("https://cdn.spicecrm.io/"+e.id),t.modalOpen=!1)})})},e.prototype.openSourceEditor=function(){var t=this;this.modal.openModal("SystemRichTextSourceModal").subscribe(function(e){e.instance._html=t._html,e.instance.html.subscribe(function(e){t._html=e,"function"==typeof t.onChange&&t.onChange(e),t.renderer.setProperty(t.htmlEditor.nativeElement,"innerHTML",t._html)})})},e.prototype.commandIsActive=function(e){return this.isActive&&this._document.queryCommandState(e)},e.prototype.triggerBlocks=function(s){var o=this;if(this.isActive){var n=!1;this.select.forEach(function(t){var e=s.find(function(e){return e.nodeName===t});void 0!==e&&t===e.nodeName?!1===n&&(o.block=e.nodeName.toLowerCase(),n=!0):!1===n&&(o.block="default")}),n=!1}},e.prototype.insertUrl=function(){var e=prompt("Insert URL link","http://");e&&""!==e&&"http://"!==e&&this.editorService.createLink(e)},e.prototype.insertColor=function(e,t){this.editorService.insertColor(e,t)},e.prototype.setFontName=function(e){this.editorService.setFontName(e)},e.prototype.setFontSize=function(e){this.editorService.setFontSize(e)},e.prototype.onFileChanged=function(e){},e.prototype.setCustomClass=function(e){},__decorate([core_1.ViewChild("htmleditor"),__metadata("design:type",Object)],e.prototype,"htmlEditor",void 0),e=t=__decorate([core_1.Component({selector:"system-richtext-editor",template:'<div (click)="onEditorClick()" class="slds-rich-text-editor slds-grid slds-grid_vertical slds-nowrap"><div role="toolbar" class="slds-rich-text-editor__toolbar slds-shrink-none"><ul class="slds-button-group-list"><li><button class="slds-button slds-button_icon slds-button_icon-border-filled" tabindex="-1" (click)="executeCommand(\'undo\')" [disabled]="htmlMode"><system-button-icon icon="undo"></system-button-icon><span class="slds-assistive-text">undo</span></button></li><li><button class="slds-button slds-button_icon slds-button_icon-border-filled" tabindex="-1" (click)="executeCommand(\'redo\')"><system-button-icon icon="redo" title="redo"></system-button-icon><span class="slds-assistive-text">redo</span></button></li></ul><div class="slds-grid slds-rich-text-editor__spacing-wrapper" role="group"><div class="slds-rich-text-editor__select"><div class="slds-form-element"><div class="slds-form-element__control"><div class="slds-select_container"><select class="slds-select" [(ngModel)]="block" (change)="executeCommand(block)"><option value="h1"><h1>Heading 1</h1></option><option value="h2"><h2>Heading 2</h2></option><option value="h3"><h3>Heading 3</h3></option><option value="h4">Heading 4</option><option value="h5">Heading 5</option><option value="h6">Heading 6</option><option value="p">Paragraph</option><option value="pre">Predefined</option><option value="div">Standard</option><option value="default">Default</option></select></div></div></div></div></div><ul class="slds-button-group-list"><li><button class="slds-button slds-button_icon slds-button_icon-border-filled" tabindex="-1" (click)="executeCommand(\'bold\')" [ngClass]="{\'slds-active\': commandIsActive(\'bold\')}"><system-button-icon icon="bold"></system-button-icon></button></li><li><button class="slds-button slds-button_icon slds-button_icon-border-filled" tabindex="-1" (click)="executeCommand(\'italic\')" [ngClass]="{\'slds-active\': commandIsActive(\'italic\')}"><system-button-icon icon="italic"></system-button-icon></button></li><li><button class="slds-button slds-button_icon slds-button_icon-border-filled" tabindex="-1" (click)="executeCommand(\'underline\')" [ngClass]="{\'slds-active\': commandIsActive(\'underline\')}"><system-button-icon icon="underline"></system-button-icon></button></li><li><button class="slds-button slds-button_icon slds-button_icon-border-filled" tabindex="-1" (click)="executeCommand(\'strikethrough\')" [ngClass]="{\'slds-active\': commandIsActive(\'strikethrough\')}"><system-button-icon icon="strikethrough"></system-button-icon></button></li></ul><ul class="slds-button-group-list"><li><button class="slds-button slds-button_icon slds-button_icon-border-filled" tabindex="-1" (click)="executeCommand(\'insertUnorderedList\')" [ngClass]="{\'slds-active\': commandIsActive(\'insertUnorderedList\')}"><system-button-icon icon="richtextbulletedlist"></system-button-icon></button></li><li><button class="slds-button slds-button_icon slds-button_icon-border-filled" tabindex="-1" (click)="executeCommand(\'insertOrderedList\')" [ngClass]="{\'slds-active\': commandIsActive(\'insertOrderedList\')}"><system-button-icon icon="richtextnumberedlist"></system-button-icon></button></li></ul><ul class="slds-button-group-list"><li><button class="slds-button slds-button_icon slds-button_icon-border-filled" tabindex="-1" (click)="executeCommand(\'indent\')" [ngClass]="{\'slds-active\': commandIsActive(\'indent\')}"><system-button-icon icon="richtextindent"></system-button-icon></button></li><li><button class="slds-button slds-button_icon slds-button_icon-border-filled" tabindex="-1" (click)="executeCommand(\'outdent\')" [ngClass]="{\'slds-active\': commandIsActive(\'otdent\')}"><system-button-icon icon="richtextoutdent"></system-button-icon></button></li></ul><ul class="slds-button-group-list"><li><button class="slds-button slds-button_icon slds-button_icon-border-filled" tabindex="-1" (click)="executeCommand(\'justifyLeft\')" [ngClass]="{\'slds-active\': commandIsActive(\'justifyLeft\')}"><system-button-icon icon="left_align_text"></system-button-icon></button></li><li><button class="slds-button slds-button_icon slds-button_icon-border-filled" tabindex="-1" (click)="executeCommand(\'justifyCenter\')" [ngClass]="{\'slds-active\': commandIsActive(\'justifyCenter\')}"><system-button-icon icon="center_align_text"></system-button-icon></button></li><li><button class="slds-button slds-button_icon slds-button_icon-border-filled" tabindex="-1" (click)="executeCommand(\'justifyRight\')" [ngClass]="{\'slds-active\': commandIsActive(\'justifyRight\')}"><system-button-icon icon="right_align_text"></system-button-icon></button></li><li><button class="slds-button slds-button_icon slds-button_icon-border-filled" tabindex="-1" (click)="executeCommand(\'justifyFull\')" [ngClass]="{\'slds-active\': commandIsActive(\'justifyFull\')}"><system-button-icon icon="justify_text"></system-button-icon></button></li></ul><ul class="slds-button-group-list"><li><button class="slds-button slds-button_icon slds-button_icon-border-filled" tabindex="-1" (click)="executeCommand(\'openMediaFilePicker\')"><system-button-icon icon="image"></system-button-icon></button></li><li><button class="slds-button slds-button_icon slds-button_icon-border-filled" tabindex="-1" (click)="insertUrl()"><system-button-icon icon="link"></system-button-icon></button></li><li><button class="slds-button slds-button_icon slds-button_icon-border-filled" tabindex="-1" (click)="executeCommand(\'unlink\')"><system-button-icon icon="remove_link"></system-button-icon></button></li></ul><ul class="slds-button-group-list"><li><button class="slds-button slds-button_icon slds-button_icon-border-filled" tabindex="-1" (click)="executeCommand(\'removeFormat\')"><system-button-icon icon="remove_formatting"></system-button-icon></button></li></ul><ul class="slds-button-group-list"><li><button class="slds-button slds-button_icon slds-button_icon-border-filled" tabindex="-1" (click)="executeCommand(\'openSourceEditor\')"><system-button-icon icon="insert_tag_field"></system-button-icon></button></li><li><button class="slds-button slds-button_icon slds-button_icon-border-filled" tabindex="-1" disabled (click)="executeCommand(\'openEditorModal\')"><system-button-icon icon="expand_alt"></system-button-icon></button></li></ul></div><div class="slds-rich-text-editor__textarea slds-grid" #editorWrapper><div class="slds-rich-text-area__content slds-text-color_weak slds-grow"><div #htmleditor [attr.contenteditable]="isActive" (input)="onContentChange($event.target.innerHTML)" (click)="exec()" (keyup)="exec()"></div><div *ngIf="!modeVisual" #sourceeditor (input)="onContentChange($event.target.innerText)" style="white-space: pre-line;"></div></div></div></div>',providers:[{provide:forms_1.NG_VALUE_ACCESSOR,useExisting:core_1.forwardRef(function(){return t}),multi:!0},systemrichtextservice]}),__param(3,core_1.Inject(common_1.DOCUMENT)),__metadata("design:paramtypes",[services_7.modal,core_1.Renderer2,systemrichtextservice,Object,core_1.ElementRef])],e)}();exports.SystemRichTextEditor=SystemRichTextEditor;var SystemRichTextSourceModal=function(){function e(e,t,s){this.language=e,this.renderer=t,this.sanitized=s,this.self={},this._html="",this.html=new core_1.EventEmitter}return e.prototype.ngOnInit=function(){this.renderer.setProperty(this.sourceEditor.nativeElement,"innerText",this._html)},e.prototype.onContentChange=function(e){this._html=e},Object.defineProperty(e.prototype,"sanitizedHtml",{get:function(){return this.sanitized.bypassSecurityTrustHtml(this._html)},enumerable:!0,configurable:!0}),e.prototype.close=function(){this.html.emit(this._html),this.self.destroy()},__decorate([core_1.ViewChild("sourceeditor"),__metadata("design:type",Object)],e.prototype,"sourceEditor",void 0),e=__decorate([core_1.Component({selector:"system-richtext-sourcemodal",template:'<system-modal size="large"><system-modal-header (close)="close()">{{language.getLabel(\'LBL_HTMLSOURCE\')}}</system-modal-header><system-modal-content><div class="slds-grid" style="height: 70vh;"><div class="slds-size--1-of-2 slds-p-right--xx-small"><div class="slds-box slds-theme--default slds-scrollable_y" [innerHtml]="sanitizedHtml" style="height: 100%;"></div></div><div class="slds-size--1-of-2 slds-p-left--x-small"><div class="slds-box slds-theme--default slds-scrollable_y" #sourceeditor (input)="onContentChange($event.target.innerText)" style="height: 100%;white-space: pre-line;"></div></div></div></system-modal-content><system-modal-footer><button class="slds-button slds-button--neutral" (click)="close()">{{language.getLabel(\'LBL_OK\')}}</button></system-modal-footer></system-modal>'}),__metadata("design:paramtypes",[services_3.language,core_1.Renderer2,platform_browser_1.DomSanitizer])],e)}();exports.SystemRichTextSourceModal=SystemRichTextSourceModal;var SystemComponents=function(){function SystemComponents(e,t){this.metadata=e,this.vms=t,this.version="1.0",this.build_date="2018-10-22",this.vms.registerModule(this)}return SystemComponents=__decorate([core_1.NgModule({imports:[directives_1.DirectivesModule,common_2.CommonModule,forms_2.FormsModule],declarations:[SystemIcon,SystemComponentContainer,SystemDynamicComponent,SystemUtilityIcon,SystemStencil,SystemTableStencils,SystemSpinner,SystemComponentMissing,SystemDynamicRouteContainer,SystemTooltip,SystemToastContainer,SystemButtonIcon,SystemButtonGroup,SystemActionIcon,SystemConfirmDialog,SystemTinyMCE,SystemTinyMCEModal,SpeechRecognition,SystemCaptureImage,PaginationControlsComponent,PaginationPipe,SystemPrompt,SystemModalWrapper,SystemLoadingModal,SystemModal,SystemModalHeader,SystemModalContent,SystemModalFooter,SystemCollabsableTab,SystemLink,SystemCustomIcon,SystemCheckbox,SystemCheckboxGroup,SystemCheckboxGroupCheckbox,SystemCard,SystemCardHeaderTitle,SystemCardBody,SystemCardFooter,SystemTree,SystemTreeItem,SystemSelect,SystemSection,SystemRichTextEditor,SystemRichTextSourceModal],entryComponents:[SystemDynamicRouteContainer],exports:[SystemIcon,SystemUtilityIcon,SystemStencil,SystemTableStencils,SystemSpinner,SystemDynamicComponent,SystemComponentMissing,SystemTooltip,SystemToastContainer,SystemButtonIcon,SystemButtonGroup,SystemActionIcon,SystemTinyMCE,SpeechRecognition,PaginationControlsComponent,PaginationPipe,SystemPrompt,SystemModalWrapper,SystemModal,SystemModalHeader,SystemModalContent,SystemModalFooter,SystemCollabsableTab,SystemLink,SystemCustomIcon,SystemCheckbox,SystemCheckboxGroup,SystemCheckboxGroupCheckbox,SystemCard,SystemCardHeaderTitle,SystemCardBody,SystemCardFooter,SystemTree,SystemTreeItem,SystemSelect,SystemSection,SystemRichTextEditor]}),__metadata("design:paramtypes",[services_1.metadata,services_5.VersionManagerService])],SystemComponents)}();exports.SystemComponents=SystemComponents;