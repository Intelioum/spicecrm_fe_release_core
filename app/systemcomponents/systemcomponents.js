/*
SpiceUI 2018.10.001

Copyright (c) 2016-present, aac services.k.s - All rights reserved.
Redistribution and use in source and binary forms, without modification, are permitted provided that the following conditions are met:
- Redistributions of source code must retain this copyright and license notice, this list of conditions and the following disclaimer.
- Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
- If used the SpiceCRM Logo needs to be displayed in the upper left corner of the screen in a minimum dimension of 31x31 pixels and be clearly visible, the icon needs to provide a link to http://www.spicecrm.io
THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

*/

"use strict";var __decorate=this&&this.__decorate||function(t,e,s,o){var n,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,s):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,s,o);else for(var r=t.length-1;0<=r;r--)(n=t[r])&&(a=(i<3?n(a):3<i?n(e,s,a):n(e,s))||a);return 3<i&&a&&Object.defineProperty(e,s,a),a},__metadata=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},__param=this&&this.__param||function(s,o){return function(t,e){o(t,e,s)}};Object.defineProperty(exports,"__esModule",{value:!0});var core_1=require("@angular/core"),rxjs_1=require("rxjs"),forms_1=require("@angular/forms"),common_1=require("@angular/common"),platform_browser_1=require("@angular/platform-browser"),common_2=require("@angular/common"),forms_2=require("@angular/forms"),directives_1=require("../directives/directives"),router_1=require("@angular/router"),services_1=require("../services/services"),services_2=require("../services/services"),services_3=require("../services/services"),services_4=require("../services/services"),services_5=require("../services/services"),services_6=require("../services/services"),services_7=require("../services/services"),services_8=require("../services/services"),systemrichtextservice=function(){function t(t){this._document=t}return t.prototype.executeCommand=function(t){"h1"!==t&&"h2"!==t&&"h3"!==t&&"h4"!==t&&"h5"!==t&&"h6"!==t&&"p"!==t&&"pre"!==t||this._document.execCommand("formatBlock",!1,t),this._document.execCommand(t,!1,null)},t.prototype.createLink=function(t){if(t.includes("http")){var e='<a href="'+t+'" target="_blank">'+this.selectedText+"</a>";this.insertHtml(e)}else this._document.execCommand("createlink",!1,t)},t.prototype.insertColor=function(t,e){this.restoreSelection()&&("textColor"===e?this._document.execCommand("foreColor",!1,t):this._document.execCommand("hiliteColor",!1,t))},t.prototype.setFontName=function(t){this._document.execCommand("fontName",!1,t)},t.prototype.setFontSize=function(t){this._document.execCommand("fontSize",!1,t)},t.prototype.insertHtml=function(t){if(!this._document.execCommand("insertHTML",!1,t))throw new Error("Unable to perform the operation")},t.prototype.saveSelection=function(){if(window.getSelection){var t=window.getSelection();t.getRangeAt&&t.rangeCount&&(this.savedSelection=t.getRangeAt(0),this.selectedText=t.toString())}else this._document.getSelection&&this._document.createRange?this.savedSelection=document.createRange():this.savedSelection=null},t.prototype.restoreSelection=function(){if(!this.savedSelection)return!1;if(window.getSelection){var t=window.getSelection();return t.removeAllRanges(),t.addRange(this.savedSelection),!0}return!!this._document.getSelection||void 0},t.prototype.checkSelection=function(){if(0===this.savedSelection.toString().length)throw new Error("No Selection Made");return!0},t.prototype.insertImage=function(t){this._document.execCommand("insertImage",!1,t)},t.prototype.createCustomClass=function(t){var e=t.tag?t.tag:"span",s="<"+e+' class="'+t.class+'">'+this.selectedText+"</"+e+">";this.insertHtml(s)},t=__decorate([core_1.Injectable(),__param(0,core_1.Inject(common_1.DOCUMENT)),__metadata("design:paramtypes",[Object])],t)}();exports.systemrichtextservice=systemrichtextservice;var SystemIcon=function(){function t(t){this.metadata=t,this.module="",this.icon="",this.size="",this.sprite="standard",this.addclasses="",this.divClass="slds-media__figure"}return t.prototype.getSizeClass=function(){return this.size?"slds-icon--"+this.size:""},t.prototype.getSvgHRef=function(){return"./sldassets/icons/"+this.getSprite()+"-sprite/svg/symbols.svg#"+this.getIcon()},t.prototype.getIconClass=function(){switch(this.sprite){case"standard":case"custom":return"slds-icon"+(this.size?" slds-icon--"+this.size:"")+" slds-icon-"+this.getSprite()+"-"+this.getIcon().replace(/_/g,"-")+" "+this.addclasses;default:return"slds-icon"+(this.size?" slds-icon--"+this.size:"")+" slds-icon-text-default "+this.addclasses}},t.prototype.getIcon=function(){if(this.icon)return this.icon;if(this.module&&this.metadata.getModuleIcon(this.module)){var t=this.metadata.getModuleIcon(this.module);return 0<t.indexOf(":")?t.split(":")[1]:t}return"empty"},t.prototype.getSprite=function(){return this.module&&this.metadata.getModuleIcon(this.module)&&0<this.metadata.getModuleIcon(this.module).indexOf(":")?this.metadata.getModuleIcon(this.module).split(":")[0]:this.sprite},__decorate([core_1.Input(),__metadata("design:type",String)],t.prototype,"module",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],t.prototype,"icon",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],t.prototype,"size",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],t.prototype,"sprite",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],t.prototype,"addclasses",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],t.prototype,"divClass",void 0),t=__decorate([core_1.Component({selector:"system-icon",template:'<div [ngClass]="divClass"><svg aria-hidden="true" [ngClass]="getIconClass()"><use [attr.xlink:href]="getSvgHRef()"></use></svg></div>'}),__metadata("design:paramtypes",[services_1.metadata])],t)}();exports.SystemIcon=SystemIcon;var SystemComponentContainer=function(){function SystemComponentContainer(){this.containerRef=new core_1.EventEmitter,this.containerComponent=""}return SystemComponentContainer.prototype.ngAfterViewInit=function(){this.containerRef.emit(this.container),this.containerRef.complete()},__decorate([core_1.ViewChild("container",{read:core_1.ViewContainerRef}),__metadata("design:type",core_1.ViewContainerRef)],SystemComponentContainer.prototype,"container",void 0),SystemComponentContainer=__decorate([core_1.Component({selector:"system-component-container",template:'<div *ngIf="!loaded" [title]="containerComponent" style="width:100%;" class="slds-align--absolute-center slds-p-around--xx-small"><system-spinner size="12"></system-spinner></div><ng-template #container></ng-template>'})],SystemComponentContainer)}();exports.SystemComponentContainer=SystemComponentContainer;var SystemDynamicComponent=function(){function t(t){this.metadata=t,this.component="",this.componentref=new core_1.EventEmitter}return t.prototype.ngAfterViewInit=function(){var e=this;this.metadata.addComponent(this.component,this.container).subscribe(function(t){e.componentref.emit(t)})},__decorate([core_1.ViewChild("container",{read:core_1.ViewContainerRef}),__metadata("design:type",core_1.ViewContainerRef)],t.prototype,"container",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],t.prototype,"component",void 0),__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],t.prototype,"componentref",void 0),t=__decorate([core_1.Component({selector:"system-dynamic-component",template:"<div #container></div>"}),__metadata("design:paramtypes",[services_1.metadata])],t)}();exports.SystemDynamicComponent=SystemDynamicComponent;var SystemUtilityIcon=function(){function t(){this.icon="",this.size="",this.addclasses="",this.colorclass="slds-icon-text-default",this.title=""}return t.prototype.getSvgHRef=function(){return"./sldassets/icons/utility-sprite/svg/symbols.svg#"+this.icon},t.prototype.getIconClass=function(){return"slds-icon"+(this.size?" slds-icon--"+this.size:"")+" "+this.colorclass+" "+this.addclasses},__decorate([core_1.Input(),__metadata("design:type",String)],t.prototype,"icon",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],t.prototype,"size",void 0),__decorate([core_1.Input("class"),core_1.Input(),__metadata("design:type",String)],t.prototype,"addclasses",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],t.prototype,"colorclass",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],t.prototype,"title",void 0),t=__decorate([core_1.Component({selector:"system-utility-icon",template:'<div class="slds-icon_container slds-icon-text-error" [title]="title"><svg aria-hidden="true" [ngClass]="getIconClass()"><use [attr.xlink:href]="getSvgHRef()"></use></svg></div>'})],t)}();exports.SystemUtilityIcon=SystemUtilityIcon;var SystemStencil=function(){function t(){}return t=__decorate([core_1.Component({selector:"system-stencil",template:'<div class="slds-theme--shade" style="background-color:#e4e9f3; min-width:100px;">&nbsp;</div>'})],t)}();exports.SystemStencil=SystemStencil;var SystemTableStencils=function(){function t(){this.columns=1,this.rows=5,this.tools=!1,this.select=!1,this.colArray=[],this.rowArray=[]}return t.prototype.ngOnInit=function(){for(var t=1;this.rowArray.push(t),++t<=this.rows;);for(var e=1;this.colArray.push(e),++e<=this.columns;);},t.prototype.linestyle=function(t){return{opacity:.5+.5/t}},__decorate([core_1.Input(),__metadata("design:type",Number)],t.prototype,"columns",void 0),__decorate([core_1.Input(),__metadata("design:type",Number)],t.prototype,"rows",void 0),__decorate([core_1.Input(),__metadata("design:type",Boolean)],t.prototype,"tools",void 0),__decorate([core_1.Input(),__metadata("design:type",Boolean)],t.prototype,"select",void 0),t=__decorate([core_1.Component({selector:"[system-table-stencils]",template:'<tr *ngFor="let row of rowArray" [ngStyle]="linestyle(row)"><td *ngIf="select" class="slds-cell-shrink"></td><td *ngFor="let col of colArray"><system-stencil></system-stencil></td><td *ngIf="tools" class="slds-cell-shrink"></td></tr>'}),__metadata("design:paramtypes",[])],t)}();exports.SystemTableStencils=SystemTableStencils;var SystemSpinner=function(){function t(){this.size=0,this.border=0,this.inverse="false",this.spinnerStyle={}}return t.prototype.ngOnInit=function(){return 0!=this.size&&(this.spinnerStyle.width=this.size+"px",this.spinnerStyle.height=this.size+"px"),0!=this.border&&(this.spinnerStyle["border-width"]=this.border+"px"),"true"==this.inverse&&(this.spinnerStyle["border-right-color"]="#fff",this.spinnerStyle["border-left-color"]="#fff",this.spinnerStyle["border-bottom-color"]="#fff"),{}},__decorate([core_1.Input(),__metadata("design:type",Number)],t.prototype,"size",void 0),__decorate([core_1.Input(),__metadata("design:type",Number)],t.prototype,"border",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],t.prototype,"inverse",void 0),t=__decorate([core_1.Component({selector:"system-spinner",template:'<div class="cssload-container"><div class="cssload-double-torus" [ngStyle]="spinnerStyle"></div></div>'})],t)}();exports.SystemSpinner=SystemSpinner;var SystemComponentMissing=function(){function SystemComponentMissing(){this.component=""}return SystemComponentMissing=__decorate([core_1.Component({selector:"system-component-missing",template:'<div class="slds-box slds-align_absolute-center slds-theme_alert-texture slds-theme_error">Component&nbsp;<b>{{component}}</b>&nbsp;Missing</div>'}),__metadata("design:paramtypes",[])],SystemComponentMissing)}();exports.SystemComponentMissing=SystemComponentMissing;var SystemDynamicRouteContainer=function(){function SystemDynamicRouteContainer(t,e){this.metadata=t,this.route=e,this.routercomponent=null}return SystemDynamicRouteContainer.prototype.ngAfterViewInit=function(){var e=this;if(!this.routercomponent){var t=this.metadata.getRouteComponent(this.route.snapshot.routeConfig.path);this.metadata.addComponent(t,this.componentcontainer).subscribe(function(t){e.routercomponent=t})}},__decorate([core_1.ViewChild("componentcontainer",{read:core_1.ViewContainerRef}),__metadata("design:type",core_1.ViewContainerRef)],SystemDynamicRouteContainer.prototype,"componentcontainer",void 0),SystemDynamicRouteContainer=__decorate([core_1.Component({selector:"system-dynamicroute-container",template:"<div #componentcontainer></div>"}),__metadata("design:paramtypes",[services_1.metadata,router_1.ActivatedRoute])],SystemDynamicRouteContainer)}();exports.SystemDynamicRouteContainer=SystemDynamicRouteContainer;var SystemTooltip=function(){function t(){this.tooltiptext="",this.displayHelp=!1}return t.prototype.toggleHelp=function(){this.displayHelp=!this.displayHelp},t.prototype.openHelp=function(){this.displayHelp=!0},t.prototype.closeHelp=function(){this.displayHelp=!1},__decorate([core_1.Input(),__metadata("design:type",String)],t.prototype,"tooltiptext",void 0),t=__decorate([core_1.Component({selector:"system-tooltip",template:'<div class="slds-is-relative"><div class="slds-form-element"><div class="slds-form-element__icon slds-align-middle"><button class="slds-button slds-button_icon slds-button slds-button_icon" (mouseover)="openHelp()" (mouseout)="closeHelp()"><system-button-icon [icon]="\'info\'"></system-button-icon><span class="slds-assistive-text">Help</span></button></div></div><div *ngIf="displayHelp" class="slds-popover slds-popover_tooltip slds-nubbin_bottom-left slds-is-absolute" role="tooltip" style="word-wrap: break-word;white-space: normal;width: 300px;bottom: 30px;left: -15px;"><div class="slds-popover__body">{{tooltiptext}}</div></div></div>'})],t)}();exports.SystemTooltip=SystemTooltip;var SystemToastContainer=function(){function t(t){this.toast=t}return t.prototype.getToastClass=function(t,e){var s="";switch(e){case"alert":s="slds-notify--alert slds-theme--alert-texture ";break;default:s="slds-notify--toast "}switch(t){case"success":s+="slds-theme--success";break;case"warning":s+="slds-theme--warning";break;case"error":s+="slds-theme--error"}return s},t.prototype.getToastIcon=function(t){switch(t){case"success":return"success";case"warning":return"warning";case"error":return"error";default:return"info"}},t=__decorate([core_1.Component({selector:"system-toast-container",template:'<div class="slds-notify_container"><div *ngFor="let activeToast of toast.activeToasts" class="slds-notify" [ngClass]="getToastClass(activeToast.type, activeToast.theme)" role="alert"><button class="slds-button slds-notify__close slds-button--icon-inverse" (click)="toast.clearToast(activeToast.id)"><system-button-icon [icon]="\'close\'" [size]="\'large\'"></system-button-icon></button><div class="slds-notify__content slds-grid"><system-utility-icon [icon]="getToastIcon(activeToast.type)" [size]="\'small\'" [addclasses]="\'slds-m-right--small slds-col slds-no-flex\'" [colorclass]="\'slds-icon\'"></system-utility-icon><div class="slds-col slds-align-middle"><h2 class="slds-text-heading--small">{{activeToast.text}}</h2><p *ngIf="activeToast.description">{{activeToast.description}}</p></div></div></div></div>'}),__metadata("design:paramtypes",[services_2.toast])],t)}();exports.SystemToastContainer=SystemToastContainer;var SystemButtonIcon=function(){function t(t){this.metadata=t,this.icon="",this.sprite="utility",this.size="",this.module="",this.position="",this.inverse=!1,this.title=void 0,this.addclasses=""}return t.prototype.getSvgHRef=function(){return"./sldassets/icons/"+this.getSprite()+"-sprite/svg/symbols.svg#"+this.getIcon()},t.prototype.getIcon=function(){if(this.icon)return this.icon;if(this.module&&this.metadata.getModuleIcon(this.module)){var t=this.metadata.getModuleIcon(this.module);return 0<t.indexOf(":")?t.split(":")[1]:t}return"empty"},t.prototype.getSprite=function(){return this.module&&this.metadata.getModuleIcon(this.module)&&0<this.metadata.getModuleIcon(this.module).indexOf(":")?this.metadata.getModuleIcon(this.module).split(":")[0]:this.sprite},t.prototype.getClass=function(){var t=[];return""!=this.size?t.push("slds-button__icon--"+this.size):t.push("slds-button__icon"),""!=this.position&&t.push("slds-button__icon_"+this.position),this.inverse&&t.push("slds-button_icon-inverse"),this.addclasses?this.addclasses+" "+t:t},__decorate([core_1.Input(),__metadata("design:type",String)],t.prototype,"icon",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],t.prototype,"sprite",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],t.prototype,"size",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],t.prototype,"module",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],t.prototype,"position",void 0),__decorate([core_1.Input(),__metadata("design:type",Boolean)],t.prototype,"inverse",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],t.prototype,"title",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],t.prototype,"addclasses",void 0),t=__decorate([core_1.Component({selector:"system-button-icon",template:'<svg aria-hidden="true" class="slds-button__icon" [ngClass]="getClass()" [title]="title"><use [attr.xlink:href]="getSvgHRef()"></use></svg>'}),__metadata("design:paramtypes",[services_1.metadata])],t)}();exports.SystemButtonIcon=SystemButtonIcon;var SystemButtonCustomIcon=function(){function t(t){this.metadata=t,this.inverse=!1,this.title="",this.file="./assets/icons/spicecrm.svg"}return t.prototype.getSvgHRef=function(){return this.file+"#"+this.icon},t.prototype.getClass=function(){var t=[];return this.size?t.push("slds-button__icon--"+this.size):t.push("slds-button__icon"),this.position&&t.push("slds-button__icon_"+this.position),this.inverse&&t.push("slds-button_icon-inverse"),t},__decorate([core_1.Input(),__metadata("design:type",String)],t.prototype,"icon",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],t.prototype,"size",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],t.prototype,"position",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],t.prototype,"inverse",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],t.prototype,"title",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],t.prototype,"file",void 0),t=__decorate([core_1.Component({selector:"system-button-custom-icon",template:'<svg aria-hidden="true" class="slds-button__icon" [ngClass]="getClass()" [title]="title"><use [attr.xlink:href]="getSvgHRef()"></use></svg>'}),__metadata("design:paramtypes",[services_1.metadata])],t)}();exports.SystemButtonCustomIcon=SystemButtonCustomIcon;var SystemButtonGroup=function(){function t(t){this.metadata=t,this.items=[],this.action=new core_1.EventEmitter,this.isopen=!1}return t.prototype.toggleOpen=function(){this.isopen=!this.isopen},__decorate([core_1.Input(),__metadata("design:type",Array)],t.prototype,"items",void 0),__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],t.prototype,"action",void 0),t=__decorate([core_1.Component({selector:"system-button-group",template:'<div class="slds-button-group" role="group"><button class="slds-button slds-button_neutral">Refresh</button><div class="slds-dropdown-trigger slds-dropdown-trigger_click slds-button_last" [ngClass]="{\'slds-is-open\': isopen}"><button class="slds-button slds-button_icon slds-button_icon-border-filled" (click)="toggleOpen()"><system-button-icon icon="down"></system-button-icon></button><div class="slds-dropdown slds-dropdown_right slds-dropdown_actions"><ul class="slds-dropdown__list" role="menu"><li class="slds-dropdown__item" role="presentation"><a href="javascript:void(0);" role="menuitem" tabindex="0"><span class="slds-truncate" title="Overflow Item One">Overflow Item One</span></a></li><li class="slds-dropdown__item" role="presentation"><a href="javascript:void(0);" role="menuitem" tabindex="-1"><span class="slds-truncate" title="Overflow Item Two">Overflow Item Two</span></a></li><li class="slds-dropdown__item" role="presentation"><a href="javascript:void(0);" role="menuitem" tabindex="-1"><span class="slds-truncate" title="Overflow Item Three">Overflow Item Three</span></a></li></ul></div></div></div>'}),__metadata("design:paramtypes",[services_1.metadata])],t)}();exports.SystemButtonGroup=SystemButtonGroup;var SystemActionIcon=function(){function t(t){this.metadata=t,this.icon="",this.size="small",this.title=void 0}return Object.defineProperty(t.prototype,"svgHRef",{get:function(){return"./sldassets/icons/action-sprite/svg/symbols.svg#"+this.icon},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"iconClass",{get:function(){return this.icon?"slds-icon-action-"+this.icon.replace("_","-"):""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sizeClass",{get:function(){return"slds-icon--"+this.size},enumerable:!0,configurable:!0}),__decorate([core_1.Input(),__metadata("design:type",String)],t.prototype,"icon",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],t.prototype,"size",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],t.prototype,"title",void 0),t=__decorate([core_1.Component({selector:"system-action-icon",template:'<span class="slds-icon_container slds-icon-action-change-record-type slds-icon_container--circle" [ngClass]="iconClass"><svg class="slds-icon" [ngClass]="sizeClass" aria-hidden="true"><use [attr.xlink:href]="svgHRef"></use></svg></span>'}),__metadata("design:paramtypes",[services_1.metadata])],t)}();exports.SystemActionIcon=SystemActionIcon;var SystemConfirmDialog=function(){function SystemConfirmDialog(t){this.language=t,this.self={},this.answer=null,this.answerSubject=null,this.title="title",this.message="message",this.answerSubject=new rxjs_1.Subject,this.answer=this.answerSubject.asObservable()}return SystemConfirmDialog.prototype.ok=function(){this.answerSubject.next(!0),this.answerSubject.complete(),this.self.destroy()},SystemConfirmDialog.prototype.cancel=function(){this.answerSubject.next(!1),this.answerSubject.complete(),this.self.destroy()},SystemConfirmDialog=__decorate([core_1.Component({selector:"system-confirm-dialog",template:'<div class="slds-backdrop slds-backdrop--open"></div><div role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open"><div class="slds-modal__container"><div class="slds-modal__header"><h2 class="slds-text-heading--medium">{{title}}</h2></div><div class="slds-modal__content slds-p-around--medium">{{message}}</div><div class="slds-modal__footer"><button class="slds-button slds-button--neutral" (click)="cancel()">{{language.getLabel(\'LBL_CANCEL\')}}</button> <button class="slds-button slds-button--brand" (click)="ok()">{{language.getLabel(\'LBL_OK\')}}</button></div></div></div>',styles:[":host { position: relative; z-index: 9100; }"]}),__metadata("design:paramtypes",[services_3.language])],SystemConfirmDialog)}();exports.SystemConfirmDialog=SystemConfirmDialog;var SystemTinyMCE=function(){function t(t,e){var s=this;this.metadata=t,this.configurationService=e,this.elementid="mytinymce",this.height="250px",this.stylesheetId="",this.elementContent="new content",this.tinymceConfig={selector:"#"+this.elementid,remove_script_host:!0,relative_urls:!1,document_base_url:this.configurationService.getFrontendUrl(),menubar:!1,statusbar:!0,resize:!0,browser_spellcheck:!0,image_advtab:!0,paste_as_text:!0,paste_filter_drop:!0,plugins:["link","code","image","lists","paste","table"],toolbar:"undo redo | formatselect | styleselect bold italic removeformat | bullist numlist | link image table | code",skin_url:"vendor/tinymce/skins/lightgray",setup:function(e){(s.editor=e).on("keyup",function(){var t=e.getContent();s.content=t})},formats:{alignleft:{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",classes:"align-left"},aligncenter:{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",classes:"align-center"},alignright:{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",classes:"align-right"},alignjustify:{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",classes:"align-justify"},strikethrough:{inline:"del"}},style_formats:[{title:"Inline",items:[{title:"fett",icon:"bold",format:"bold"},{title:"kursiv",icon:"italic",format:"italic"},{title:"unterstrichen",icon:"underline",format:"underline"},{title:"strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"hochgestellt",icon:"superscript",format:"superscript"},{title:"tiefgestellt",icon:"subscript",format:"subscript"}]},{title:"Ausrichtung",items:[{title:"links",icon:"alignleft",format:"alignleft"},{title:"mittig",icon:"aligncenter",format:"aligncenter"},{title:"rechts",icon:"alignright",format:"alignright"},{title:"Blocksatz",icon:"alignjustify",format:"alignjustify"}]}],style_formats_merge:!1,body_class:"spice"},this.contentChange=new core_1.EventEmitter}return Object.defineProperty(t.prototype,"content",{get:function(){return this.elementContent},set:function(t){this.elementContent=t,this.contentChange.emit(this.elementContent)},enumerable:!0,configurable:!0}),t.prototype.setStylesheet=function(){var t=[];if(_.isEmpty(this.stylesheetId))delete this.tinymceConfig.content_style;else{if((t=this.metadata.getHtmlFormats(this.stylesheetId)).length){var e=0;this.tinymceConfig.block_formats="",this.tinymceConfig.extended_valid_elements=[],this.tinymceConfig.custom_elements=[],this.tinymceConfig.block_formats+="Absatz=p;",this.tinymceConfig.style_formats.push({title:"Weiteres",items:[]});for(var s=0,o=t;s<o.length;s++){var n=o[s];if(_.isEmpty(n.block))this.tinymceConfig.style_formats[2].items.push({title:n.name,inline:n.inline,classes:n.classes,styles:n.styles});else{e++;var i;this.tinymceConfig.formats[i="custom_format_"+e]={title:n.name,inline:n.inline,block:n.block,classes:n.classes,styles:n.styles,wrapper:Boolean(Number(n.wrapper))},this.tinymceConfig.block_formats+=n.name+"="+i+";",this.tinymceConfig.extended_valid_elements.indexOf(n.block)&&this.tinymceConfig.extended_valid_elements.push(n.block),this.tinymceConfig.custom_elements.indexOf(n.block)&&this.tinymceConfig.custom_elements.push(n.block)}}0===this.tinymceConfig.style_formats[2].items.length&&this.tinymceConfig.style_formats.splice(2,1)}this.tinymceConfig.content_style=this.metadata.getHtmlStylesheetCode(this.stylesheetId)}},t.prototype.updateevent=function(){this.content=this.editor.getContent()},t.prototype.getStyle=function(){return{height:this.height}},t.prototype.ngAfterViewInit=function(){var e=this;this.metadata.loadLibs("tinymce").subscribe(function(t){e.setStylesheet(),tinymce.init(e.tinymceConfig)})},t.prototype.ngOnDestroy=function(){tinymce.remove(this.editor)},t.prototype.ngOnInit=function(){this.tinymceConfig.selector="#"+this.elementid,this.tinymceConfig.document_base_url=this.configurationService.getFrontendUrl()},__decorate([core_1.Input(),__metadata("design:type",String)],t.prototype,"elementid",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],t.prototype,"height",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],t.prototype,"stylesheetId",void 0),__decorate([core_1.Input(),__metadata("design:type",Object),__metadata("design:paramtypes",[Object])],t.prototype,"content",null),__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],t.prototype,"contentChange",void 0),t=__decorate([core_1.Component({selector:"system-tinymce",template:'<textarea id="{{elementid}}" [ngStyle]="getStyle()">{{content}}</textarea>',styles:[":host >>> .mce-ico{font-size: 12px; color: #54698d;}",":host >>> .mce-text{font-size: 12px; color: #54698d;}",":host >>> .mce-btn button{font-size: 12px; color: #54698d;}",":host >>> .mce-tinymce{border-radius: 4px}",":host >>> .mce-widget{font-family: 'Titillium Web', sans-serif;}"],host:{"(click)":"this.updateevent()","(keyup)":"this.updateevent()"}}),__metadata("design:paramtypes",[services_1.metadata,services_6.configurationService])],t)}();exports.SystemTinyMCE=SystemTinyMCE;var SystemTinyMCEModal=function(){function SystemTinyMCEModal(t){this.language=t,this.self={},this.content="",this.updateContent=new core_1.EventEmitter,this.title=""}return SystemTinyMCEModal.prototype.ngOnInit=function(){0===this.title.length&&(this.title=this.language.getLabel("LBL_EDITOR"))},SystemTinyMCEModal.prototype.closeModal=function(){this.self.destroy()},SystemTinyMCEModal.prototype.contentChange=function(t){this.content=t,this.updateContent.emit(t)},SystemTinyMCEModal=__decorate([core_1.Component({template:'<system-modal size="large"><system-modal-header (close)="closeModal()">{{title}}</system-modal-header><system-modal-content><system-tinymce [(content)]="content" [stylesheetId]="stylesheetId" [height]="\'80%\'" (contentChange)="contentChange($event)"></system-tinymce></system-modal-content><system-modal-footer><button class="slds-button slds-button--neutral" (click)="closeModal()">{{language.getLabel(\'LBL_OK\')}}</button></system-modal-footer></system-modal>'}),__metadata("design:paramtypes",[services_3.language])],SystemTinyMCEModal)}();exports.SystemTinyMCEModal=SystemTinyMCEModal;var SystemCaptureImage=function(){function SystemCaptureImage(t){this.backend=t,this.self={},this.model={},this.stream={},this.imageTaken=!1,this.response$=new core_1.EventEmitter}return SystemCaptureImage.prototype.ngAfterViewInit=function(){this.startstream()},SystemCaptureImage.prototype.startstream=function(){var e=this;navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&navigator.mediaDevices.getUserMedia({video:!0}).then(function(t){e.video.element.nativeElement.src=window.URL.createObjectURL(t),e.video.element.nativeElement.play(),e.stream=t})},SystemCaptureImage.prototype.stopstream=function(){this.stream.getVideoTracks()[0].stop()},SystemCaptureImage.prototype.capture=function(){var t=this.canvas.element.nativeElement.getContext("2d");document.getElementById("video");t.drawImage(this.video.element.nativeElement,0,0,1024,768),this.stopstream(),this.imageTaken=!0},SystemCaptureImage.prototype.discard=function(){this.video.element.nativeElement.play(),this.imageTaken=!1},SystemCaptureImage.prototype.send=function(){var e=this,t={filename:"xsxx.png",file:this.canvas.element.nativeElement.toDataURL().replace("data:image/png;base64,",""),filemimetype:"image/png"};this.backend.postRequest("/module/"+this.model.module+"/"+this.model.id+"/attachment",{},t).subscribe(function(t){e.response$.emit(t[0]),e.close()})},SystemCaptureImage.prototype.close=function(){this.self.destroy()},SystemCaptureImage.prototype.onModalEscX=function(){this.close()},__decorate([core_1.ViewChild("video",{read:core_1.ViewContainerRef}),__metadata("design:type",core_1.ViewContainerRef)],SystemCaptureImage.prototype,"video",void 0),__decorate([core_1.ViewChild("canvas",{read:core_1.ViewContainerRef}),__metadata("design:type",core_1.ViewContainerRef)],SystemCaptureImage.prototype,"canvas",void 0),SystemCaptureImage=__decorate([core_1.Component({selector:"system-capture-image",template:'<section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open"><div class="slds-modal__container" style="width:1048px;max-width: 100%;"><header class="slds-modal__header"><button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" (click)="close()"><system-button-icon [icon]="\'close\'" [size]="\'large\'"></system-button-icon></button><h2 class="slds-text-heading_medium slds-hyphenate">capture Image</h2></header><div class="slds-modal__content slds-p-around_medium" id="modal-content-id-1"><video #video [ngClass]="{\'slds-hide\': imageTaken}" width="1024" height="768" autoplay></video><canvas #canvas [ngClass]="{\'slds-hide\': !imageTaken}" width="1024" height="768"></canvas></div><footer class="slds-modal__footer"><button class="slds-button slds-button--neutral" (click)="close()">Cancel</button> <button *ngIf="!imageTaken" class="slds-button slds-button--brand" (click)="capture()">Capture</button><button *ngIf="imageTaken" class="slds-button slds-button--brand" (click)="send()">Use</button></footer></div></section>'}),__metadata("design:paramtypes",[services_4.backend])],SystemCaptureImage)}();exports.SystemCaptureImage=SystemCaptureImage;var SpeechRecognition=function(){function SpeechRecognition(t,e,s,o,n){this.language=t,this.metadata=e,this.toast=s,this.changeDetRef=o,this.applicationRef=n,this.debug=!0,this.theText="",this.theTextNewest="",this.theTextHtml="",this.dirty=!1,this.errorOccurred=!1,this.toRestart=!1,this.recognizing=!1,this.cancelling=!1,this.stopping=!1,this.pausing=!1,this.working=!1,this.languages=[{id:"de_DE",name:"Deutsch"},{id:"en_US",name:"English"}],this.selectedLanguage=0}return SpeechRecognition.prototype.ngOnInit=function(){var a=this;this.debug&&console.log("SpeechRecognition debugging is on :-)"),window.chrome&&window.chrome.webstore||(this.toast.sendToast("Sorry, speech recognition is possible only with Google Chrome.","error"),this.self.destroy()),"de_DE"===this.language.currentlanguage?this.selectedLanguage=0:this.selectedLanguage=1,this.recognition=new(window.SpeechRecognition||window.webkitSpeechRecognition||window.mozSpeechRecognition||window.msSpeechRecognition),this.debug&&console.log("webspeech object: ",this.recognition),this.recognition.continuous=!0,this.recognition.lang=this.languages[this.selectedLanguage].id,this.recognition.interimResults=!0,this.recognition.maxAlternatives=1,this.part1fromField=this.textfield.element.nativeElement.value.substring(0,this.textfield.element.nativeElement.selectionStart),this.debug&&console.log("selection start/end: ",this.textfield.element.nativeElement.selectionStart,this.textfield.element.nativeElement.selectionEnd),this.part2fromField=this.textfield.element.nativeElement.value.substring(this.textfield.element.nativeElement.selectionEnd),this.recognition.onresult=function(t){a.debug&&console.log("result callback"),a.debug&&console.log("results: ",t.results),a.debug&&console.log("results length: ",t.results.length),a.debug&&console.log("result index: ",t.resultIndex),a.working=!0,a.changeDetRef.detectChanges();for(var e="",s=!0,o=0,n=t.results;o<n.length;o++){var i=n[o];i.isFinal||(s=!1),a.debug&&console.log("isFinal"),a.debug&&console.log("Transcript",i[0].transcript),e+=i[0].transcript,a.debug&&console.log("dummy",e),a.theTextNewest=e}s&&(a.working=!1,a.changeDetRef.detectChanges()),a.debug&&console.log("theText: ",a.theText),!a.dirty&&a.theTextNewest&&(a.dirty=!0),a.dirty&&(a.theTextHtml="<p>"+a.linebreaks2html(a.capitalize(a.theText+" "+a.theTextNewest))+"</p>",a.changeDetRef.detectChanges())},this.recognition.onerror=function(t){switch(a.debug&&console.log("error callback: ",t.error),t.error){case"network":a.errorOccurred=!0,a.sendErrorToast(a.language.getLabel("MSG_NO_NETWORK"));break;case"no-speech":return void(a.stopping||a.recognition.stop());case"audio-capture":a.errorOccurred=!0,a.sendErrorToast(a.language.getLabel("MSG_NO_MICROPHONE"));break;case"not-allowed":a.errorOccurred=!0,t.timeStamp-a.start_timestamp<100?a.sendErrorToast(a.language.getLabel("LBL_BLOCKED")):a.sendErrorToast(a.language.getLabel("LBL_DENIED"))}a.applicationRef.tick()},this.recognition.onend=function(t){a.working=!1,a.debug&&console.log("callback onend"),a.cancelling?a.self.destroy():!a.pausing||a.stopping?a.acceptAndClose():a.applyText()},this.recognition.onspeechend=function(t){a.debug&&console.log("callback onspeechend")},this.recognition.onspeechstart=function(t){a.debug&&console.log("callback onspeechstart")},this.recognition.onnomatch=function(t){a.debug&&console.log("callback onnomatch")},this.start()},SpeechRecognition.prototype.doRestart=function(){this.toRestart=!0,this.recognition.stop()},SpeechRecognition.prototype.applyText=function(){this.theText+=""===this.theText?this.capitalize(this.theTextNewest):this.theTextNewest,this.theTextNewest=""},SpeechRecognition.prototype.acceptAndClose=function(){if(this.applyText(),this.errorOccurred)""===this.theText&&""===this.theTextNewest&&this.self.destroy();else{if(!this.stopping)return this.recognition.start(),void(this.toRestart&&(this.toRestart=!1));this.recognizing=!1,this.textfield.element.nativeElement.value=this.part1fromField+this.theText+this.part2fromField,this.self.destroy()}},SpeechRecognition.prototype.start=function(t){void 0===t&&(t=null),this.recognizing||(this.recognizing=!0,this.recognition.start(),t&&(this.start_timestamp=t.timeStamp))},SpeechRecognition.prototype.buttonAcceptClose=function(){this.debug&&console.log("accept&close button"),this.stopping=!0,this.pausing?this.acceptAndClose():this.recognition.stop()},SpeechRecognition.prototype.buttonPause=function(){this.debug&&console.log("pause button"),this.pausing=!this.pausing,this.changeDetRef.detectChanges(),this.applicationRef.tick(),this.pausing&&this.recognition.stop(),!this.pausing&&this.recognition.start()},SpeechRecognition.prototype.buttonCancel=function(){this.cancelling=!0,this.pausing&&this.recognition.start(),this.recognition.abort(),this.self.destroy()},SpeechRecognition.prototype.changeLang=function(t){this.selectedLanguage=t.target.selectedIndex,this.recognition.lang=this.languages[this.selectedLanguage].id,this.doRestart()},SpeechRecognition.prototype.capitalize=function(t){return 0===this.part1fromField.length?t.replace(/\S/,function(t){return t.toUpperCase()}):t},SpeechRecognition.prototype.linebreaks2html=function(t){return t.replace(/\n\n/g,"</p><p>").replace(/\n/g,"<br>")},SpeechRecognition.prototype.sendErrorToast=function(t){this.toast.sendToast(this.language.getLabel("ERR_SPEECH_RECOGNITION")+": "+t+".","error","",!1)},SpeechRecognition=__decorate([core_1.Component({template:'<div *ngIf="1 || !cancelling" role="dialog" class="slds-modal slds-fade-in-open slds-modal_large"><div class="slds-modal__container"><div class="slds-modal__header slds-theme--default"><h2 class="slds-text-heading--medium" style="position: relative">{{language.getLabel(\'LBL_SPEECH_RECOGNITION\')}} <span *ngIf="working" style="position:absolute;left:0; opacity: 0.5;">&#9678;</span> <span *ngIf="pausing" style="position:absolute;right:0; opacity: 0.5;">PAUSE</span></h2></div><div class="slds-modal__content slds-theme--default slds-p-around--medium slds-p-bottom--xx-small" style="margin-bottom:-0.75rem"><div *ngIf="!dirty" class="slds-text-align_center slds-m-vertical--x-large" style="margin-bottom:3rem" [style.visibility]="pausing ? \'hidden\':\'visible\'">{{language.getLabel(\'LBL_WAITING_START_SPEAKING\')}}</div><div *ngIf="dirty" [innerHTML]="theTextHtml" class="slds-text-longform"></div></div><div class="slds-modal__footer"><div class="slds-grid slds-grid_align-spread"><div class="slds-col"><div class="slds-select_container"><select class="slds-select" (change)="changeLang($event)"><option *ngFor="let lang of languages;let index=i" [value]="lang.id" [selected]="i == selectedLanguage">{{lang.name}}</option></select></div></div><div class="slds-col"><button class="slds-button slds-button--neutral" (click)="buttonCancel()">{{language.getLabel(\'LBL_CANCEL\')}}</button> <button class="slds-button slds-button--neutral" (click)="buttonPause()" [disabled]="cancelling"><ng-container *ngIf="!pausing"><system-button-icon [icon]="\'pause\'" [position]="\'left\'"></system-button-icon>{{language.getLabel(\'LBL_PAUSE\')}}</ng-container><ng-container *ngIf="pausing"><system-button-icon [icon]="\'record\'" [position]="\'left\'"></system-button-icon>{{language.getLabel(\'LBL_CONTINUE\')}}</ng-container></button> <button class="slds-button slds-button--brand" (click)="buttonAcceptClose($event)" [disabled]="!dirty || cancelling"><system-button-icon [icon]="\'stop\'" [position]="\'left\'"></system-button-icon>{{language.getLabel(\'LBL_ACCEPT\')}} &amp; {{language.getLabel(\'LBL_CLOSE\')}}</button></div></div></div></div></div>'}),__metadata("design:paramtypes",[services_3.language,services_1.metadata,services_2.toast,core_1.ChangeDetectorRef,core_1.ApplicationRef])],SpeechRecognition)}();exports.SpeechRecognition=SpeechRecognition;var PaginationControlsComponent=function(){function t(t){this.language=t,this._page=1,this.limit=1,this.total_records=0,this.variation="default",this.page$=new core_1.EventEmitter,this.offset=0,this.max_page=0}return Object.defineProperty(t.prototype,"page",{get:function(){return this._page},set:function(t){this._page=t,this.page$.emit(this._page)},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){0<this.total_records&&(this.max_page=Math.ceil(this.total_records/this.limit))},t.prototype.pageUp=function(){if(this.page>=this.max_page)return!1;this.page+=1},t.prototype.pageDown=function(){if(this.page<=1)return!1;this.page-=1},__decorate([core_1.Input("page"),__metadata("design:type",Object)],t.prototype,"_page",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],t.prototype,"limit",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],t.prototype,"total_records",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],t.prototype,"variation",void 0),__decorate([core_1.Output("pageChange"),__metadata("design:type",Object)],t.prototype,"page$",void 0),t=__decorate([core_1.Component({selector:"pagination-controls",template:'<div [ngSwitch]="variation" class="slds-grid_align-center"><div *ngSwitchDefault><button class="slds-button slds-button_icon" [disabled]="page < 2" (click)="page = 1"><system-button-icon [icon]="\'chevronleft\'" title="go to first page"></system-button-icon><system-button-icon [icon]="\'chevronleft\'"></system-button-icon></button> <button class="slds-button slds-button_icon" [disabled]="page <= 1" (click)="pageDown()"><system-button-icon [icon]="\'chevronleft\'" title="go to previous page"></system-button-icon></button> <span>{{page}} {{language.getLabel(\'LBL_OF\')}} {{max_page}} {{language.getLabel(\'LBL_PAGES\')}} (showing up to {{limit}} {{language.getLabel(\'LBL_OF\')}} {{total_records}} {{language.getLabel(\'LBL_RECORDS\')}})</span> <button class="slds-button slds-button_icon" [disabled]="page >= max_page" (click)="pageUp()"><system-button-icon [icon]="\'chevronright\'" title="go to next page"></system-button-icon></button> <button class="slds-button slds-button_icon" [disabled]="page >= max_page-1" (click)="page = max_page"><system-button-icon [icon]="\'chevronright\'" title="go to last page"></system-button-icon><system-button-icon [icon]="\'chevronright\'"></system-button-icon></button></div><div *ngSwitchCase="\'short\'"><button class="slds-button slds-button_icon" [disabled]="page <= 1" (click)="pageDown()"><system-button-icon [icon]="\'chevronleft\'" title="go to previous page"></system-button-icon></button> <span>{{page}} {{language.getLabel(\'LBL_OF\')}} {{max_page}} {{language.getLabel(\'LBL_PAGES\')}}</span> <button class="slds-button slds-button_icon" [disabled]="page >= max_page" (click)="pageUp()"><system-button-icon [icon]="\'chevronright\'" title="go to next page"></system-button-icon></button></div></div>'}),__metadata("design:paramtypes",[services_3.language])],t)}();exports.PaginationControlsComponent=PaginationControlsComponent;var PaginationPipe=function(){function t(){}return t.prototype.transform=function(t,e){var s=(e.page-1)*e.limit,o=s+e.limit;return t.slice(s,o)},t=__decorate([core_1.Pipe({name:"paginate",pure:!1})],t)}();exports.PaginationPipe=PaginationPipe;var SystemPrompt=function(){function SystemPrompt(t){this.language=t,this.answer=null,this.answerSubject=null,this.self={},this.answerSubject=new rxjs_1.Subject,this.answer=this.answerSubject.asObservable()}return SystemPrompt.prototype.ngOnInit=function(){this.theme||(this.theme="shade")},SystemPrompt.prototype.ngAfterViewInit=function(){"confirm"===this.type?this.cancelButton.nativeElement.focus():"info"===this.type?this.okButton.nativeElement.focus():"input"===this.type&&this.inputField.nativeElement.focus()},SystemPrompt.prototype.clickOK=function(){"input"===this.type?this.answerSubject.next(this.value):this.answerSubject.next(!0),this.answerSubject.complete(),this.self.destroy()},SystemPrompt.prototype.clickCancel=function(){"info"!==this.type&&(this.answerSubject.next(!1),this.answerSubject.complete(),this.self.destroy())},SystemPrompt.prototype.keyPressed=function(t){27===t.keyCode&&this.clickCancel()},__decorate([core_1.Input(),__metadata("design:type",String)],SystemPrompt.prototype,"type",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],SystemPrompt.prototype,"text",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],SystemPrompt.prototype,"headertext",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],SystemPrompt.prototype,"theme",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],SystemPrompt.prototype,"value",void 0),__decorate([core_1.ViewChild("cancelButton"),__metadata("design:type",Object)],SystemPrompt.prototype,"cancelButton",void 0),__decorate([core_1.ViewChild("okButton"),__metadata("design:type",Object)],SystemPrompt.prototype,"okButton",void 0),__decorate([core_1.ViewChild("inputField"),__metadata("design:type",Object)],SystemPrompt.prototype,"inputField",void 0),SystemPrompt=__decorate([core_1.Component({selector:"system-prompt",template:'<section role="alertdialog" tabindex="-1" class="slds-modal slds-fade-in-open slds-modal_prompt"><div class="slds-modal__container"><header class="slds-modal__header slds-theme_{{theme}}" [style.height]="headertext ? \'auto\':\'1rem\'"><h2 *ngIf="headertext" class="slds-text-heading_medium slds-hyphenate">{{headertext}}</h2></header><div *ngIf="text || type === \'input\'" class="slds-modal__content slds-text-align_center"><div *ngIf="text" class="slds-m-vertical_medium">{{text}}</div><div *ngIf="type === \'input\'" class="slds-form-element slds-m-vertical_medium"><div class="slds-form-element__control"><input #inputField class="slds-input" type="text" [(ngModel)]="value"></div></div></div><footer class="slds-modal__footer"><button *ngIf="type !== \'info\'" #cancelButton class="slds-button slds-button--neutral" (click)="clickCancel()">{{language.getLabel(\'LBL_CANCEL\')}}</button> <button #okButton class="slds-button slds-button--brand" (click)="clickOK()">OK</button></footer></div></section>',host:{"( window:keydown )":"this.keyPressed( $event )"}}),__metadata("design:paramtypes",[services_3.language])],SystemPrompt)}();exports.SystemPrompt=SystemPrompt;var SystemModalWrapper=function(){function SystemModalWrapper(t,e){this.modalservice=t,this.application=e,this.self=null,this.escKey=!0}return SystemModalWrapper.prototype.closeModal=function(){this.self.destroy()},SystemModalWrapper.prototype.ngOnDestroy=function(){this.modalservice.removeModal(this.self),this.application.tick()},SystemModalWrapper.prototype.setEscKey=function(t){void 0===t&&(t=!0),this.escKey=t},__decorate([core_1.ViewChild("target",{read:core_1.ViewContainerRef}),__metadata("design:type",core_1.ViewContainerRef)],SystemModalWrapper.prototype,"target",void 0),SystemModalWrapper=__decorate([core_1.Component({selector:"system-modal-wrapper",template:'<div [style.zIndex]="zIndex" style="position:fixed"><span #target></span></div>'}),__metadata("design:paramtypes",[services_7.modal,core_1.ApplicationRef])],SystemModalWrapper)}();exports.SystemModalWrapper=SystemModalWrapper;var SystemLoadingModal=function(){function SystemLoadingModal(t){this.language=t,this.messagelabel="LBL_LOADING"}return SystemLoadingModal=__decorate([core_1.Component({template:'<section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open"><div class="slds-modal__container"><div class="slds-modal__content slds-p-around_medium"><div class="slds-align--absolute-center"><div class="slds-grid slds-grid--vertical-align-center"><system-spinner size="16"></system-spinner><div class="slds-p-left--small">{{language.getLabel(this.messagelabel)}}</div></div></div></div></div></section>'}),__metadata("design:paramtypes",[services_3.language])],SystemLoadingModal)}();exports.SystemLoadingModal=SystemLoadingModal;var SystemLink=function(){function t(){this.click=new core_1.EventEmitter}return t.prototype.clicked=function(t){this.click.emit(t)},__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],t.prototype,"click",void 0),t=__decorate([core_1.Component({selector:"system-link",template:'<span class="slds-text-link_reset" (click)="clicked($event)"><ng-content></ng-content></span>'}),__metadata("design:paramtypes",[])],t)}();exports.SystemLink=SystemLink;var SystemModal=function(){function t(t){this.metadata=t,this.size="",this.class=""}return Object.defineProperty(t.prototype,"sizeClass",{get:function(){return this.size?this.class+" slds-modal_"+this.size:this.class},enumerable:!0,configurable:!0}),__decorate([core_1.Input(),__metadata("design:type",String)],t.prototype,"size",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],t.prototype,"class",void 0),t=__decorate([core_1.Component({selector:"system-modal",template:'<section role="dialog" class="slds-modal slds-fade-in-open" [ngClass]="sizeClass"><div class="slds-modal__container"><ng-content select="system-modal-header"></ng-content><ng-content select="system-modal-content"></ng-content><ng-content select="system-modal-footer"></ng-content></div></section>'}),__metadata("design:paramtypes",[services_1.metadata])],t)}();exports.SystemModal=SystemModal;var SystemModalHeader=function(){function t(t,e){this.metadata=t,this.language=e,this.module="",this.hiddenCloseButton=!1,this.close=new core_1.EventEmitter}return __decorate([core_1.Input(),__metadata("design:type",String)],t.prototype,"module",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],t.prototype,"hiddenCloseButton",void 0),__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],t.prototype,"close",void 0),t=__decorate([core_1.Component({selector:"system-modal-header",template:'<header class="slds-modal__header slds-theme--shade"><button *ngIf="!hiddenCloseButton" class="slds-button slds-button_icon slds-modal__close slds-button--icon-inverse" (click)="close.emit(true)"><system-button-icon [icon]="\'close\'" [size]="\'large\'"></system-button-icon><span class="slds-assistive-text">{{language.getLabel(\'LBL_CLOSE\')}}</span></button><div class="slds-grid slds-grid--align-spread"><div class="slds-media__figure slds-m-right_x-small"><span *ngIf="module" class="slds-icon_container"><system-icon [module]="module" size="small"></system-icon></span> <span *ngIf="icon" class="slds-icon_container"><system-icon [icon]="module" [sprite]="sprite" size="small"></system-icon></span></div><h2 class="slds-text-heading_medium slds-hyphenate"><ng-content></ng-content></h2><div></div></div></header>'}),__metadata("design:paramtypes",[services_1.metadata,services_3.language])],t)}();exports.SystemModalHeader=SystemModalHeader;var SystemModalContent=function(){function t(t){this.metadata=t,this.margin="medium",this.grow=!1}return Object.defineProperty(t.prototype,"marginclass",{get:function(){var t="slds-modal__content";return""!=this.margin&&(t+=" slds-p-around--"+this.margin),this.grow&&(t+=" slds-grow"),t},enumerable:!0,configurable:!0}),__decorate([core_1.Input(),__metadata("design:type",Object)],t.prototype,"margin",void 0),__decorate([core_1.Input(),__metadata("design:type",Boolean)],t.prototype,"grow",void 0),t=__decorate([core_1.Component({selector:"system-modal-content",template:"<ng-content></ng-content>",host:{"[class]":"this.marginclass"}}),__metadata("design:paramtypes",[services_1.metadata])],t)}();exports.SystemModalContent=SystemModalContent;var SystemModalFooter=function(){function t(t){this.metadata=t}return t=__decorate([core_1.Component({selector:"system-modal-footer",template:'<footer class="slds-modal__footer"><ng-content></ng-content></footer>'}),__metadata("design:paramtypes",[services_1.metadata])],t)}();exports.SystemModalFooter=SystemModalFooter;var SystemCollabsableTab=function(){function t(t){this.language=t,this.expanded=!0,this.title=""}return t.prototype.togglePanel=function(){this.expanded=!this.expanded},t.prototype.getChevronStyle=function(){if(!this.expanded)return{transform:"rotate(45deg)","margin-top":"4px"}},t.prototype.getTabStyle=function(){if(!this.expanded)return{height:"0px",transform:"rotateX(90deg)"}},__decorate([core_1.Input(),__metadata("design:type",Boolean)],t.prototype,"expanded",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],t.prototype,"title",void 0),t=__decorate([core_1.Component({selector:"system-collapsable-tab",template:'<div class="slds-section" [ngClass]="{\'slds-is-open\': expanded}"><h3 *ngIf="title != \'\'" class="slds-section__title"><button aria-controls="expando-unique-id" aria-expanded="true" class="slds-button slds-section__title-action" (click)="togglePanel()"><system-utility-icon icon="switch" size="x-small" addclasses="slds-section__title-action-icon slds-button__icon slds-button__icon_left"></system-utility-icon><span class="slds-truncate" title="Section Title">{{language.getLabel(title)}}</span></button></h3><div [ngStyle]="getTabStyle()"><ng-content></ng-content></div></div>'}),__metadata("design:paramtypes",[services_3.language])],t)}();exports.SystemCollabsableTab=SystemCollabsableTab;var SystemCustomIcon=function(){function t(t){this.metadata=t,this.icon="",this.file="./assets/icons/spicecrm.svg",this.size="",this.addclasses="",this.divClass="slds-media__figure"}return t.prototype.getSizeClass=function(){return this.size?"slds-icon--"+this.size:""},t.prototype.getSvg=function(){return this.file+"#"+this.icon},t.prototype.getIconClass=function(){return"slds-icon"+(this.size?" slds-icon--"+this.size:"")+" slds-icon-text-default "+this.addclasses},__decorate([core_1.Input(),__metadata("design:type",String)],t.prototype,"icon",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],t.prototype,"file",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],t.prototype,"size",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],t.prototype,"addclasses",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],t.prototype,"divClass",void 0),t=__decorate([core_1.Component({selector:"system-custom-icon",template:'<div class="slds-p-horizontal--xxx-small"><svg aria-hidden="true" [ngClass]="getIconClass()"><use [attr.xlink:href]="getSvg()"></use></svg></div>'}),__metadata("design:paramtypes",[services_1.metadata])],t)}();exports.SystemCustomIcon=SystemCustomIcon;var SystemCheckbox=function(){function t(t){this.language=t,this.id=_.uniqueId(),this._value="1",this._checked=!1,this.disabled=!1,this.click$=new core_1.EventEmitter,this.check$=new core_1.EventEmitter,this.uncheck$=new core_1.EventEmitter,this.onChange=function(t){},this.onTouched=function(){}}var e;return e=t,Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(t){this._value=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"model_value",{get:function(){return this._model_value},set:function(t){t!=this._model_value&&this.onChange(t),this.writeValue(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"checked",{get:function(){return this._checked},set:function(t){this._checked=t},enumerable:!0,configurable:!0}),t.prototype.click=function(){if(this.disabled)return!1;this.onTouched(),this.checked=!this.checked,this.click$.emit(this.checked),this.checked?this.check$.emit():this.uncheck$.emit()},t.prototype.registerOnChange=function(e){this.onChange=function(t){e(t)}},t.prototype.registerOnTouched=function(t){this.onTouched=t},t.prototype.setDisabledState=function(t){this.disabled=t},t.prototype.writeValue=function(t){this.disabled||(this._model_value=t,this.model_value&&!this.checked?this.checked=!0:!this.model_value&&this.checked&&(this.checked=!1))},__decorate([core_1.Input(),__metadata("design:type",Object),__metadata("design:paramtypes",[Object])],t.prototype,"value",null),__decorate([core_1.Input(),__metadata("design:type",Boolean),__metadata("design:paramtypes",[Boolean])],t.prototype,"checked",null),__decorate([core_1.Input(),__metadata("design:type",Object)],t.prototype,"disabled",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],t.prototype,"label",void 0),__decorate([core_1.Output("toggle"),core_1.Output("click"),__metadata("design:type",Object)],t.prototype,"click$",void 0),__decorate([core_1.Output("check"),__metadata("design:type",Object)],t.prototype,"check$",void 0),__decorate([core_1.Output("uncheck"),__metadata("design:type",Object)],t.prototype,"uncheck$",void 0),t=e=__decorate([core_1.Component({selector:"system-checkbox",template:'<span class="slds-checkbox"><input type="checkbox" id="checkbox-{{id}}" [attr.aria-labelledby]="\'checkbox-button-label-\'+id+\' check-group-header\'" (click)="click()" [disabled]="disabled" [checked]="checked" [value]="value" [(ngModel)]="model_value"> <label class="slds-checkbox__label" for="checkbox-{{id}}" id="checkbox-button-label-{{id}}"><span class="slds-checkbox_faux"></span> <span class="slds-form-element__label"><ng-content></ng-content></span></label></span>',providers:[{provide:forms_1.NG_VALUE_ACCESSOR,useExisting:core_1.forwardRef(function(){return e}),multi:!0}]}),__metadata("design:paramtypes",[services_3.language])],t)}();exports.SystemCheckbox=SystemCheckbox;var SystemCard=function(){function t(t){this.language=t,this.collapsible=!0,this.collapsed=!1,this.collapsed$=new core_1.EventEmitter}return t.prototype.toggleCollapsed=function(){if(console.log(this.collapsible),!this.collapsible)return!1;this.collapsed=!this.collapsed,this.collapsed$.emit(this.collapsed)},__decorate([core_1.Input("class"),__metadata("design:type",String)],t.prototype,"additional_css_classes",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],t.prototype,"header_icon",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],t.prototype,"actionset_id",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],t.prototype,"collapsible",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],t.prototype,"collapsed",void 0),__decorate([core_1.Output("collapsedChange"),__metadata("design:type",Object)],t.prototype,"collapsed$",void 0),t=__decorate([core_1.Component({selector:"system-card",template:'<article class="slds-card {{additional_css_classes}}"><div class="slds-card__header slds-grid"><header class="slds-media slds-media_center slds-has-flexi-truncate"><div *ngIf="header_icon" class="slds-media__figure"><span class="slds-icon_container slds-icon-standard-account" title="account"><system-icon icon="{{header_icon}}"></system-icon></span></div><div class="slds-media__body" (click)="toggleCollapsed()"><h2 class="slds-card__header-title"><span class="slds-text-heading_small"><ng-content select="system-card-header-title"></ng-content></span></h2></div><div *ngIf="actionset_id" class="slds-no-flex"></div></header></div><div class="slds-card__body slds-card__body_inner"><ng-content select="system-card-body"></ng-content></div><footer class="slds-card__footer"><ng-content select="system-card-footer"></ng-content></footer></article>'}),__metadata("design:paramtypes",[services_3.language])],t)}();exports.SystemCard=SystemCard;var SystemCardHeaderTitle=function(){function t(){}return t=__decorate([core_1.Directive({selector:"system-card-header-title"})],t)}();exports.SystemCardHeaderTitle=SystemCardHeaderTitle;var SystemCardBody=function(){function t(){}return t=__decorate([core_1.Directive({selector:"system-card-body"})],t)}();exports.SystemCardBody=SystemCardBody;var SystemCardFooter=function(){function t(){}return t=__decorate([core_1.Directive({selector:"system-card-footer"})],t)}();exports.SystemCardFooter=SystemCardFooter;var SystemTree=function(){function t(){this.selectedItem$=new core_1.EventEmitter,this.treelistChange$=new core_1.EventEmitter,this.addItem$=new core_1.EventEmitter,this.treelist=[],this.selectedItem="",this.tree=[],this.treeConfig={draggable:!1,canadd:!1,clickable:!1,expandall:!1,collapsible:!0}}return Object.defineProperty(t.prototype,"config",{get:function(){return this.treeConfig},set:function(t){this.treeConfig.draggable=t.draggable||!1,this.treeConfig.canadd=t.canadd||!1,this.treeConfig.clickable=t.clickable||!1,this.treeConfig.expandall=t.expandall||!1,this.treeConfig.collapsible=t.collapsible||!0},enumerable:!0,configurable:!0}),t.prototype.ngOnChanges=function(t){this.resetTreelist(),this.tree=this.buildTree(this.treelist)},t.prototype.resetTreelist=function(){this.treelist.map(function(t){return""!==t.parent_id&&void 0!==t.parent_id||(t.parent_id=null),t.parent_name="",t=_.omit(t,"path","level","children")})},t.prototype.buildTree=function(t,e,s,o){void 0===e&&(e=null),void 0===s&&(s=0),void 0===o&&(o=[]);for(var n=[],i=0,a=t;i<a.length;i++){var r=a[i];if(r.parent_id===e){r.expanded=!this.config.collapsible||this.config.expandall,r.clickable=this.config.clickable,r.level=s+1,r.path=o.slice(),r.path[s]=r.id;var l=this.buildTree(t,r.id,s+1,r.path);delete r.path[s+1],l.length?r.children=l:r.children=[];for(var c=0,d=l;c<d.length;c++){var p=d[c];(p.id===this.selectedItem||p.expanded)&&(r.expanded=!0)}n.push(r)}}return n},t.prototype.handleSelectItemEvent=function(t){this.selectedItem$.emit(t)},t.prototype.handleAddEvent=function(t){this.addItem$.emit(t)},t.prototype.handleDragDropEvent=function(e){for(var t={},s=!0,o=0,n=this.treelist;o<n.length;o++){var i=n[o];i.id===e.child&&1===i.level&&(s=!1),i.id===e.parent&&i.path.includes(e.child)&&(s=!1)}s&&(t.id=e.child,t.parent_id=e.parent,t.parent_name=this.treelist.find(function(t){return t.id===e.parent}).name,this.treelistChange$.emit(t))},__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],t.prototype,"selectedItem$",void 0),__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],t.prototype,"treelistChange$",void 0),__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],t.prototype,"addItem$",void 0),__decorate([core_1.Input(),__metadata("design:type",Array)],t.prototype,"treelist",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],t.prototype,"selectedItem",void 0),__decorate([core_1.Input(),__metadata("design:type",Object),__metadata("design:paramtypes",[Object])],t.prototype,"config",null),t=__decorate([core_1.Component({selector:"system-tree",template:'<div role="listbox"><ul class="slds-tree" role="tree" aria-labelledby="treeheading"><system-tree-item [items]="tree" [config]="config" [selectedItem]="selectedItem" (addItem$)="handleAddEvent($event)" (treelistChange$)="handleDragDropEvent($event)" (selectedItem$)="handleSelectItemEvent($event)"></system-tree-item></ul></div><div *ngIf="config.canadd" class="slds-grid slds-align-content-center slds-border--top slds-m-top--x-small slds-p-top--x-small"><button class="slds-button slds-button--neutral slds-p-around--xx-small" (click)="handleAddEvent(null)" style="border-radius: 50%;"><system-button-icon [icon]="\'add\'" [size]="\'small\'"></system-button-icon></button></div>'})],t)}();exports.SystemTree=SystemTree;var SystemTreeItem=function(){function t(t){this.renderer=t,this.selectedItem$=new core_1.EventEmitter,this.treelistChange$=new core_1.EventEmitter,this.addItem$=new core_1.EventEmitter,this.selectedItem="",this.items=[],this.config={}}return t.prototype.expand=function(t,e){e&&(e.expanded=!e.expanded,t.stopPropagation())},t.prototype.addItem=function(t,e,s){this.handleAddEvent({id:e,name:s}),t.stopPropagation()},t.prototype.handleAddEvent=function(t){this.addItem$.emit(t)},t.prototype.selectItem=function(t,e){this.selectedItem$.emit(e),t.stopPropagation()},t.prototype.handleSelectItemEvent=function(t){this.selectedItem$.emit(t)},t.prototype.dragItem=function(t,e){this.config.draggable&&(t.dataTransfer.setDragImage(this.renderer.createElement("div"),0,0),t.dataTransfer.setData("itemId",e),t.stopPropagation())},t.prototype.onDragging=function(t){this.config.draggable&&(this.renderer.setStyle(t.target,"border","1px solid red"),t.preventDefault())},t.prototype.onDragLeave=function(t){this.config.draggable&&this.renderer.removeStyle(t.target,"border")},t.prototype.dropItem=function(t,e){if(this.config.draggable){this.renderer.removeStyle(t.target,"border");var s=t.dataTransfer.getData("itemId");s&&s!==e&&this.handleDragDropEvent({child:s,parent:e}),t.dataTransfer.clearData(),t.preventDefault(),t.stopPropagation()}},t.prototype.handleDragDropEvent=function(t){this.treelistChange$.emit(t)},__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],t.prototype,"selectedItem$",void 0),__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],t.prototype,"treelistChange$",void 0),__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],t.prototype,"addItem$",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],t.prototype,"selectedItem",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],t.prototype,"items",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],t.prototype,"config",void 0),t=__decorate([core_1.Component({selector:"system-tree-item",template:'<li *ngFor="let item of items" role="treeitem" [attr.aria-level]="item.level" [draggable]="config.draggable && item.level > 1" (dragstart)="dragItem($event, item.id)" (dragover)="onDragging($event)" (dragleave)="onDragLeave($event)" (drop)="dropItem($event, item.id)" (click)="selectItem($event, item.id)"><div class="slds-tree__item slds-is-open slds-grid slds-grid--align-spread slds-grid_vertical-align-center" title="{{\'Level \' + item.level}}" [ngClass]="selectedItem == item.id ? \'slds-is-selected\': \'\'"><div class="slds-grid slds-grid_vertical-align-center"><div style="min-width: 16px"><button *ngIf="item.children.length > 0 && config.collapsible" class="slds-button slds-button_icon slds-m-right--xx-small slds-m-top--none" aria-expanded="true" aria-hidden="true" tabindex="-1" (click)="expand($event, item)"><system-button-icon [icon]="item.expanded ? \'chevrondown\' : \'chevronright\'" [size]="\'xx-small\'"></system-button-icon></button><system-utility-icon *ngIf="!config.collapsible" [icon]="config.icon || \'record\'" [size]="\'xx-small\'" [addclasses]="\'slds-p-around--xxx-small slds-m-right--xx-small\'"></system-utility-icon></div><div><span *ngIf="item.clickable" class="slds-tree__item-label slds-truncate">{{item.name}}</span> <span *ngIf="!item.clickable" (click)="expand(item)" style="opacity: 0.8; cursor: default;" class="slds-tree__item-label slds-truncate">{{item.name}}</span></div></div><div *ngIf="config.canadd && item.id == selectedItem" class="slds-m-right--xx-small"><button class="slds-button slds-button_icon slds-m-top--none" (click)="addItem($event, item.id, item.name)"><system-button-icon [icon]="\'add\'" [size]="\'xx-small\'"></system-button-icon></button></div></div><ul *ngIf="item.children.length > 0 && item.expanded == true" class="slds-tree" role="tree" aria-labelledby="treeheading"><system-tree-item [config]="config" [items]="item.children" [selectedItem]="selectedItem" (addItem$)="handleAddEvent($event)" (treelistChange$)="handleDragDropEvent($event)" (selectedItem$)="handleSelectItemEvent($event)"></system-tree-item></ul></li>'}),__metadata("design:paramtypes",[core_1.Renderer2])],t)}();exports.SystemTreeItem=SystemTreeItem;var SystemSelect=function(){function t(t,e,s){this.elementRef=t,this.renderer=e,this.language=s,this.selectList=[],this.label="",this.disabled=!1,this.selectedOutputItem=new core_1.EventEmitter,this.searchList=[],this.show_list=!1,this.inputValue="",this.selectedItemId=""}return t.prototype.ngOnChanges=function(t){if(void 0!==t.selectList){var e=this.listBuilder(this.selectList);this.searchList=e}void 0!==t.selectedItem&&this.selectedItem&&(this.inputValue=this.selectedItem.name,this.selectedItemId=this.selectedItem.id)},t.prototype.onKeydown=function(t){this.searchList=[];var e=this.copyList();for(var s in e)for(var o=0,n=e[s];o<n.length;o++){var i=n[o],a=i.name.toLowerCase(),r=t.target.value.toLowerCase(),l=a.search(r);if(-1<l){if(0<r.length){var c=[i.name.slice(0,l),"<mark>",i.name.slice(l,l+t.target.value.length),"</mark>",i.name.slice(l+t.target.value.length)].join("");i.name=c}this.searchList[s]||(this.searchList[s]=[]),this.searchList[s].push(i)}}},t.prototype.listBuilder=function(t){for(var e=[],s=0,o=t;s<o.length;s++){var n=o[s];if(n.hasOwnProperty("group"))e[n.group]||(e[n.group]=[]);else{var i="_undefined";e[n.group=i]||(e[i]=[])}e[n.group].push({id:n.id,name:n.name})}return e},t.prototype.copyList=function(){var t=[],e=this.listBuilder(this.selectList);for(var s in e){t[s]=[];for(var o=0,n=e[s].length;o<n;o++)for(var i in t[s][o]=[],e[s][o])t[s][o][i]=e[s][o][i]}return t},t.prototype.clickOnSearch=function(t){this.elementRef.nativeElement.contains(t.target)||(this.show_list=!1)},t.prototype.onFocus=function(){var e=this;this.show_list=!0,this.clickListener=this.renderer.listen("document","click",function(t){return e.clickOnSearch(t)})},t.prototype.itemClicked=function(t){var e;this.show_list=!1;for(var s=0,o=this.selectList;s<o.length;s++){var n=o[s];n.id==t.id&&(e=n,this.inputValue=n.name,this.selectedItemId=n.id)}this.selectedOutputItem.emit(e)},__decorate([core_1.Input(),__metadata("design:type",Object)],t.prototype,"selectList",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],t.prototype,"label",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],t.prototype,"selectedItem",void 0),__decorate([core_1.Input(),__metadata("design:type",Boolean)],t.prototype,"disabled",void 0),__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],t.prototype,"selectedOutputItem",void 0),t=__decorate([core_1.Component({selector:"system-select",template:'<div class="slds-form-element slds-size_2-of-2"><label class="slds-form-element__label" for="combobox-id-14">{{language.getAppLanglabel(label)}}</label><div class="slds-form-element__control slds-size_2-of-2"><div class="slds-combobox_container"><div class="slds-combobox slds-dropdown-trigger slds-dropdown-trigger_click slds-is-open" aria-expanded="true" aria-haspopup="listbox" role="combobox"><div class="slds-combobox__form-element slds-input-has-icon slds-input-has-icon_right" role="none"><input (focus)="onFocus()" type="text" [attr.disabled]="disabled ? \'disabled\' : null" class="slds-input slds-combobox__input slds-combobox__input-value" id="combobox-id-14" aria-autocomplete="list" aria-controls="listbox-id-11" autoComplete="off" role="textbox" placeholder="{{language.getAppLanglabel(\'LBL_SEARCH\')}}" value="{{inputValue}}" (keyup)="onKeydown($event)"><system-utility-icon [icon]="\'search\'" [addclasses]="\'slds-input__icon slds-input__icon--left\'"></system-utility-icon></div><div *ngIf="show_list" class="slds-dropdown slds-dropdown_length-5 slds-dropdown_fluid" role="listbox"><ul class="slds-listbox slds-listbox_vertical" role="presentation"><ng-container *ngFor="let selectItem of searchList | keyvalue"><li *ngIf="selectItem.key != \'_undefined\'" role="presentation"><div class="slds-border_bottom slds-border_top slds-p-left_small" style="background-color: #ecebea;"><span class="slds-truncate size-xx-small" style="font-weight: bold; font-size: 12px;">{{selectItem.key}}</span></div></li><li *ngFor="let selectItem of selectItem.value" role="presentation" class="slds-listbox__item" (click)="itemClicked(selectItem)"><div id="{{selectItem.id}}" [ngClass]="{\'slds-has-focus\': selectedItemId == selectItem.id}" class="slds-media slds-listbox__option slds-listbox__option_plain slds-media_small" role="option"><span class="slds-media__body"><span class="slds-truncate" value="selectItem.id"><p [innerHTML]="selectItem.name"></p></span></span></div></li></ng-container></ul></div></div></div></div></div>'}),__metadata("design:paramtypes",[core_1.ElementRef,core_1.Renderer2,services_3.language])],t)}();exports.SystemSelect=SystemSelect;var SystemCheckboxGroup=function(){function t(){this.model$=new core_1.EventEmitter}var e;return e=t,Object.defineProperty(t.prototype,"model",{get:function(){return this._model},set:function(t){this._model=t,this.onChange(this._model),this.model$.emit(this._model)},enumerable:!0,configurable:!0}),t.prototype.writeValue=function(t){this._model=t},t.prototype.registerOnChange=function(t){this.onChange=t},t.prototype.registerOnTouched=function(t){this.onTouched=t},t.prototype.toggleValue=function(t){this.contains(t)?this.remove(t):this.add(t)},t.prototype.contains=function(t){if(this._model instanceof Array){if(t instanceof Array){for(var e=0,s=t;e<s.length;e++){var o=s[e];if(-1==this._model.indexOf(o))return!1}return!0}return-1<this._model.indexOf(t)}return!!this._model&&this._model===t},t.prototype.add=function(t){if(this._model instanceof Array||(this._model=[]),t instanceof Array)for(var e=0,s=t;e<s.length;e++){var o=s[e];this.contains(o)||this._model.push(o)}else this.contains(t)||this._model.push(t);this.model$.emit(this._model),this.onChange(this._model)},t.prototype.remove=function(t){if(t instanceof Array)for(var e=0,s=t;e<s.length;e++){var o,n=s[e];0<=(o=this._model.indexOf(n))&&this._model.splice(o,1)}else 0<=(o=this._model.indexOf(t))&&this._model.splice(o,1);this.model$.emit(this._model),this.onChange(this._model)},t=e=__decorate([core_1.Component({selector:"system-checkbox-group",template:"<ng-content></ng-content>",providers:[{provide:forms_1.NG_VALUE_ACCESSOR,useExisting:core_1.forwardRef(function(){return e}),multi:!0}]})],t)}();exports.SystemCheckboxGroup=SystemCheckboxGroup;var SystemCheckboxGroupCheckbox=function(){function t(t){var e=this;this.grp=t,this.id=_.uniqueId(),this.disabled=!1,this._checked=!1,this.grp.model$.subscribe(function(t){e.ngOnChanges()})}return Object.defineProperty(t.prototype,"checked",{get:function(){return this._checked},set:function(t){this._checked=t},enumerable:!0,configurable:!0}),t.prototype.toggle=function(){this.checked=!this.checked,this.checked?this.grp.add(this.value):this.grp.remove(this.value)},t.prototype.ngOnChanges=function(){this._checked=this.grp.contains(this.value)},__decorate([core_1.Input(),__metadata("design:type",Object)],t.prototype,"value",void 0),__decorate([core_1.Input(),__metadata("design:type",Object)],t.prototype,"disabled",void 0),__decorate([core_1.Input(),__metadata("design:type",Boolean),__metadata("design:paramtypes",[Boolean])],t.prototype,"checked",null),t=__decorate([core_1.Component({selector:"system-checkbox-group-checkbox",template:'\n        <span class="slds-checkbox">\n            <input type="checkbox" id="checkbox-group-checkbox-{{id}}" [attr.aria-labelledby]="\'checkbox-group-checkbox-button-label-\'+id+\' check-group-header\'" [disabled]="disabled" [checked]="checked" (click)="toggle()" />\n            <label class="slds-checkbox__label" for="checkbox-group-checkbox-{{id}}" id="checkbox-group-checkbox-button-label-{{id}}">\n                <span class="slds-checkbox_faux"></span>\n                <span class="slds-form-element__label"><ng-content></ng-content></span>\n            </label>\n        </span>'}),__param(0,core_1.Host()),__metadata("design:paramtypes",[SystemCheckboxGroup])],t)}();exports.SystemCheckboxGroupCheckbox=SystemCheckboxGroupCheckbox;var SystemSection=function(){function t(t){this.language=t,this.titlelabel="",this.expanded=!0}return t.prototype.togglePanel=function(){this.expanded=!this.expanded},t.prototype.getTabStyle=function(){if(!this.expanded)return{height:"0px",transform:"rotateX(90deg)"}},__decorate([core_1.Input(),__metadata("design:type",String)],t.prototype,"titlelabel",void 0),__decorate([core_1.Input(),__metadata("design:type",Boolean)],t.prototype,"expanded",void 0),t=__decorate([core_1.Component({selector:"system-section",template:'<div class="slds-section" [ngClass]="{\'slds-is-open\': expanded}"><h3 *ngIf="titlelabel" class="slds-section__title"><button aria-controls="expando-unique-id" aria-expanded="true" class="slds-button slds-section__title-action" (click)="togglePanel()"><system-utility-icon [icon]="\'switch\'" [size]="\'x-small\'" [addclasses]="\'slds-section__title-action-icon slds-button__icon slds-button__icon_left\'"></system-utility-icon><span class="slds-truncate" title="Section Title">{{language.getLabel(titlelabel)}}</span></button></h3><div [ngStyle]="getTabStyle()"><ng-content></ng-content></div></div>'}),__metadata("design:paramtypes",[services_3.language])],t)}();exports.SystemSection=SystemSection;var SystemRichTextEditor=function(){function t(t,e,s,o,n){this.modal=t,this.renderer=e,this.editorService=s,this._document=o,this.elementRef=n,this._html="",this.isActive=!1,this.modalOpen=!1,this.block="default",this.fontName="Tilium Web",this.fontSize="5",this.tagMap={BLOCKQUOTE:"indent",A:"link"},this.select=["H1","H2","H3","H4","H5","H6","P","PRE","DIV"]}var e;return(e=t).prototype.ngOnDestroy=function(){this.clickListener&&this.clickListener()},t.prototype.executeCommand=function(t){switch(t){case"openSourceEditor":this.openSourceEditor();break;case"openEditorModal":this.openEditorModal();break;case"openMediaFilePicker":this.openMediaFilePicker();break;default:this.isActive&&""!=t&&this.editorService.executeCommand(t),this.exec()}},t.prototype.onEditorClick=function(){var e=this;this.isActive||(this.htmlEditor.nativeElement.focus(),this.isActive=!0,this.clickListener=this.renderer.listen("document","click",function(t){return e.onDocumentClick(t)}))},t.prototype.onDocumentClick=function(t){this.modalOpen||this.elementRef.nativeElement.contains(t.target)||(this.isActive=!1,this.clickListener())},t.prototype.onContentChange=function(t){"function"==typeof this.onChange&&this.onChange(t),this._html=t},t.prototype.registerOnChange=function(t){this.onChange=t},t.prototype.registerOnTouched=function(t){this.onTouched=t},t.prototype.writeValue=function(t){this._html=t||"",this.renderer.setProperty(this.htmlEditor.nativeElement,"innerHTML",this._html)},t.prototype.exec=function(){var t;window.getSelection&&(t=window.getSelection());for(var e=t.focusNode,s=[];e&&"editor"!==e.id;)s.unshift(e),e=e.parentNode;this.triggerBlocks(s)},t.prototype.openEditorModal=function(){this.modal.openModal("SystemTinyMCEModal").subscribe(function(t){})},t.prototype.openMediaFilePicker=function(){var e=this;this.modalOpen=!0,this.modal.openModal("MediaFilePicker").subscribe(function(t){t.instance.answer.subscribe(function(t){t&&t.upload?e.modal.openModal("MediaFileUploader").subscribe(function(t){t.instance.answer.subscribe(function(t){t&&e.editorService.insertImage("https://cdn.spicecrm.io/"+t),e.modalOpen=!1})}):(t&&t.id&&e.editorService.insertImage("https://cdn.spicecrm.io/"+t.id),e.modalOpen=!1)})})},t.prototype.openSourceEditor=function(){var e=this;this.modal.openModal("SystemRichTextSourceModal").subscribe(function(t){t.instance._html=e._html,t.instance.html.subscribe(function(t){e._html=t,"function"==typeof e.onChange&&e.onChange(t),e.renderer.setProperty(e.htmlEditor.nativeElement,"innerHTML",e._html)})})},t.prototype.commandIsActive=function(t){return this.isActive&&this._document.queryCommandState(t)},t.prototype.triggerBlocks=function(s){var o=this;if(this.isActive){var n=!1;this.select.forEach(function(e){var t=s.find(function(t){return t.nodeName===e});void 0!==t&&e===t.nodeName?!1===n&&(o.block=t.nodeName.toLowerCase(),n=!0):!1===n&&(o.block="default")}),n=!1}},t.prototype.insertUrl=function(){var t=prompt("Insert URL link","http://");t&&""!==t&&"http://"!==t&&this.editorService.createLink(t)},t.prototype.insertColor=function(t,e){this.editorService.insertColor(t,e)},t.prototype.setFontName=function(t){this.editorService.setFontName(t)},t.prototype.setFontSize=function(t){this.editorService.setFontSize(t)},t.prototype.onFileChanged=function(t){},t.prototype.setCustomClass=function(t){},__decorate([core_1.ViewChild("htmleditor"),__metadata("design:type",Object)],t.prototype,"htmlEditor",void 0),t=e=__decorate([core_1.Component({selector:"system-richtext-editor",template:'<div (click)="onEditorClick()" class="slds-rich-text-editor slds-grid slds-grid_vertical slds-nowrap"><div role="toolbar" class="slds-rich-text-editor__toolbar slds-shrink-none"><ul class="slds-button-group-list"><li><button class="slds-button slds-button_icon slds-button_icon-border-filled" tabindex="-1" (click)="executeCommand(\'undo\')" [disabled]="htmlMode"><system-button-icon icon="undo"></system-button-icon><span class="slds-assistive-text">undo</span></button></li><li><button class="slds-button slds-button_icon slds-button_icon-border-filled" tabindex="-1" (click)="executeCommand(\'redo\')"><system-button-icon icon="redo" title="redo"></system-button-icon><span class="slds-assistive-text">redo</span></button></li></ul><div class="slds-grid slds-rich-text-editor__spacing-wrapper" role="group"><div class="slds-rich-text-editor__select"><div class="slds-form-element"><div class="slds-form-element__control"><div class="slds-select_container"><select class="slds-select" [(ngModel)]="block" (change)="executeCommand(block)"><option value="h1"><h1>Heading 1</h1></option><option value="h2"><h2>Heading 2</h2></option><option value="h3"><h3>Heading 3</h3></option><option value="h4">Heading 4</option><option value="h5">Heading 5</option><option value="h6">Heading 6</option><option value="p">Paragraph</option><option value="pre">Predefined</option><option value="div">Standard</option><option value="default">Default</option></select></div></div></div></div></div><ul class="slds-button-group-list"><li><button class="slds-button slds-button_icon slds-button_icon-border-filled" tabindex="-1" (click)="executeCommand(\'bold\')" [ngClass]="{\'slds-active\': commandIsActive(\'bold\')}"><system-button-icon icon="bold"></system-button-icon></button></li><li><button class="slds-button slds-button_icon slds-button_icon-border-filled" tabindex="-1" (click)="executeCommand(\'italic\')" [ngClass]="{\'slds-active\': commandIsActive(\'italic\')}"><system-button-icon icon="italic"></system-button-icon></button></li><li><button class="slds-button slds-button_icon slds-button_icon-border-filled" tabindex="-1" (click)="executeCommand(\'underline\')" [ngClass]="{\'slds-active\': commandIsActive(\'underline\')}"><system-button-icon icon="underline"></system-button-icon></button></li><li><button class="slds-button slds-button_icon slds-button_icon-border-filled" tabindex="-1" (click)="executeCommand(\'strikethrough\')" [ngClass]="{\'slds-active\': commandIsActive(\'strikethrough\')}"><system-button-icon icon="strikethrough"></system-button-icon></button></li></ul><ul class="slds-button-group-list"><li><button class="slds-button slds-button_icon slds-button_icon-border-filled" tabindex="-1" (click)="executeCommand(\'insertUnorderedList\')" [ngClass]="{\'slds-active\': commandIsActive(\'insertUnorderedList\')}"><system-button-icon icon="richtextbulletedlist"></system-button-icon></button></li><li><button class="slds-button slds-button_icon slds-button_icon-border-filled" tabindex="-1" (click)="executeCommand(\'insertOrderedList\')" [ngClass]="{\'slds-active\': commandIsActive(\'insertOrderedList\')}"><system-button-icon icon="richtextnumberedlist"></system-button-icon></button></li></ul><ul class="slds-button-group-list"><li><button class="slds-button slds-button_icon slds-button_icon-border-filled" tabindex="-1" (click)="executeCommand(\'indent\')" [ngClass]="{\'slds-active\': commandIsActive(\'indent\')}"><system-button-icon icon="richtextindent"></system-button-icon></button></li><li><button class="slds-button slds-button_icon slds-button_icon-border-filled" tabindex="-1" (click)="executeCommand(\'outdent\')" [ngClass]="{\'slds-active\': commandIsActive(\'otdent\')}"><system-button-icon icon="richtextoutdent"></system-button-icon></button></li></ul><ul class="slds-button-group-list"><li><button class="slds-button slds-button_icon slds-button_icon-border-filled" tabindex="-1" (click)="executeCommand(\'justifyLeft\')" [ngClass]="{\'slds-active\': commandIsActive(\'justifyLeft\')}"><system-button-icon icon="left_align_text"></system-button-icon></button></li><li><button class="slds-button slds-button_icon slds-button_icon-border-filled" tabindex="-1" (click)="executeCommand(\'justifyCenter\')" [ngClass]="{\'slds-active\': commandIsActive(\'justifyCenter\')}"><system-button-icon icon="center_align_text"></system-button-icon></button></li><li><button class="slds-button slds-button_icon slds-button_icon-border-filled" tabindex="-1" (click)="executeCommand(\'justifyRight\')" [ngClass]="{\'slds-active\': commandIsActive(\'justifyRight\')}"><system-button-icon icon="right_align_text"></system-button-icon></button></li><li><button class="slds-button slds-button_icon slds-button_icon-border-filled" tabindex="-1" (click)="executeCommand(\'justifyFull\')" [ngClass]="{\'slds-active\': commandIsActive(\'justifyFull\')}"><system-button-icon icon="justify_text"></system-button-icon></button></li></ul><ul class="slds-button-group-list"><li><button class="slds-button slds-button_icon slds-button_icon-border-filled" tabindex="-1" (click)="executeCommand(\'openMediaFilePicker\')"><system-button-icon icon="image"></system-button-icon></button></li><li><button class="slds-button slds-button_icon slds-button_icon-border-filled" tabindex="-1" (click)="insertUrl()"><system-button-icon icon="link"></system-button-icon></button></li><li><button class="slds-button slds-button_icon slds-button_icon-border-filled" tabindex="-1" (click)="executeCommand(\'unlink\')"><system-button-icon icon="remove_link"></system-button-icon></button></li></ul><ul class="slds-button-group-list"><li><button class="slds-button slds-button_icon slds-button_icon-border-filled" tabindex="-1" (click)="executeCommand(\'removeFormat\')"><system-button-icon icon="remove_formatting"></system-button-icon></button></li></ul><ul class="slds-button-group-list"><li><button class="slds-button slds-button_icon slds-button_icon-border-filled" tabindex="-1" (click)="executeCommand(\'openSourceEditor\')"><system-button-icon icon="insert_tag_field"></system-button-icon></button></li><li><button class="slds-button slds-button_icon slds-button_icon-border-filled" tabindex="-1" disabled (click)="executeCommand(\'openEditorModal\')"><system-button-icon icon="expand_alt"></system-button-icon></button></li></ul></div><div class="slds-rich-text-editor__textarea slds-grid" #editorWrapper><div class="slds-rich-text-area__content slds-text-color_weak slds-grow"><div #htmleditor [attr.contenteditable]="isActive" (input)="onContentChange($event.target.innerHTML)" (click)="exec()" (keyup)="exec()"></div></div></div></div>',providers:[{provide:forms_1.NG_VALUE_ACCESSOR,useExisting:core_1.forwardRef(function(){return e}),multi:!0},systemrichtextservice]}),__param(3,core_1.Inject(common_1.DOCUMENT)),__metadata("design:paramtypes",[services_7.modal,core_1.Renderer2,systemrichtextservice,Object,core_1.ElementRef])],t)}();exports.SystemRichTextEditor=SystemRichTextEditor;var SystemRichTextSourceModal=function(){function SystemRichTextSourceModal(t,e,s){this.language=t,this.renderer=e,this.sanitized=s,this.self={},this._html="",this.html=new core_1.EventEmitter}return SystemRichTextSourceModal.prototype.ngOnInit=function(){this.renderer.setProperty(this.sourceEditor.nativeElement,"innerText",this._html)},SystemRichTextSourceModal.prototype.onContentChange=function(t){this._html=t},Object.defineProperty(SystemRichTextSourceModal.prototype,"sanitizedHtml",{get:function(){return this.sanitized.bypassSecurityTrustHtml(this._html)},enumerable:!0,configurable:!0}),SystemRichTextSourceModal.prototype.close=function(){this.html.emit(this._html),this.self.destroy()},__decorate([core_1.ViewChild("sourceeditor"),__metadata("design:type",Object)],SystemRichTextSourceModal.prototype,"sourceEditor",void 0),SystemRichTextSourceModal=__decorate([core_1.Component({selector:"system-richtext-sourcemodal",template:'<system-modal size="large"><system-modal-header (close)="close()">{{language.getLabel(\'LBL_HTMLSOURCE\')}}</system-modal-header><system-modal-content><div class="slds-grid" style="height: 70vh;"><div class="slds-size--1-of-2 slds-p-right--xx-small"><div class="slds-box slds-theme--default slds-scrollable_y" [innerHtml]="sanitizedHtml" style="height: 100%;"></div></div><div class="slds-size--1-of-2 slds-p-left--x-small"><div class="slds-box slds-theme--default slds-scrollable_y" #sourceeditor (input)="onContentChange($event.target.innerText)" style="height: 100%;white-space: pre-line;"></div></div></div></system-modal-content><system-modal-footer><button class="slds-button slds-button--neutral" (click)="close()">{{language.getLabel(\'LBL_OK\')}}</button></system-modal-footer></system-modal>'}),__metadata("design:paramtypes",[services_3.language,core_1.Renderer2,platform_browser_1.DomSanitizer])],SystemRichTextSourceModal)}();exports.SystemRichTextSourceModal=SystemRichTextSourceModal;var SystemInputTime=function(){function t(t,e,s,o){this.elementref=t,this.renderer=e,this.userpreferences=s,this.language=o,this._time={display:"",moment:null,offset:0,valid:!0},this.dropdownValues=[],this.isOpen=!1,this.minutes_interval=30,this.dropdownValues=this.getDropdownValues()}var e;return(e=t).prototype.ngOnDestroy=function(){},Object.defineProperty(t.prototype,"isValid",{get:function(){return this._time.valid},enumerable:!0,configurable:!0}),t.prototype.getDropdownValues=function(){for(var t=0,e=[];t<=1440;){var s=(new moment).hour(0).minute(0).second(0);s.add(t,"minutes"),e.push({offset:t,display:s.format(this.userpreferences.getTimeFormat()),current:!1}),t+=this.minutes_interval}return e},t.prototype.getDropDownValueByOffset=function(e){return this.dropdownValues.find(function(t){return t.offset==e})},t.prototype.getNextDropDownValue=function(){return this.getDropDownValueByOffset(this._time.offset+this.minutes_interval)},t.prototype.setDisplayToNextDropDownValue=function(){this.display=this.getNextDropDownValue().display},t.prototype.setDisplayToPreviousDropDownValue=function(){this.display=this.getDropDownValueByOffset(this._time.offset-this.minutes_interval).display},Object.defineProperty(t.prototype,"display",{get:function(){return this._time.display},set:function(t){if(t){var e=moment(t,this.userpreferences.getTimeFormat(),!0);if(e.isValid())this._time.moment||(this._time.moment=new moment),this._time.moment.hour(e.hour()).minutes(e.minutes()),this._time.valid=!0,this._time.offset=this.calculateOffset(this._time.moment),this._time.display=t,this.closeDropDown(),this.onChange(this._time.moment);else{if("string"==typeof t&&t.length<=2&&0<t.length)return parseInt(t)<10?t="0"+t+":00":t+=":00",void(this.display=t);this._time.valid=!1}}else this.clear()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canclear",{get:function(){return!!this._time.display},enumerable:!0,configurable:!0}),t.prototype.clear=function(t){void 0===t&&(t=!0),this._time.moment||(this._time.moment=new moment),this._time.moment=null,this._time.display="",this._time.valid=!0,"function"==typeof this.onChange&&t&&this.onChange(this._time.moment)},t.prototype.toggleDropDown=function(){this.isOpen=!this.isOpen,this.isOpen},t.prototype.closeDropDown=function(){this.isOpen=!1},t.prototype.registerOnChange=function(t){this.onChange=t},t.prototype.registerOnTouched=function(t){this.onTouched=t},t.prototype.writeValue=function(t){t?(this._time.moment=new moment(t),this._time.offset=this.calculateOffset(this._time.moment),this._time.display=this._time.moment.format(this.userpreferences.getTimeFormat())):this.clear(!1)},t.prototype.selectValue=function(t){this._time.moment||(this._time.moment=new moment),this._time.moment.hour(0).minute(0).second(0),this._time.moment.add(t,"minutes"),this._time.offset=t,this._time.display=this._time.moment.format(this.userpreferences.getTimeFormat()),"function"==typeof this.onChange&&this.onChange(this._time.moment),this.closeDropDown()},t.prototype.calculateOffset=function(t){var e=60*t.hour()+t.minute();return Math.floor(e/this.minutes_interval)*this.minutes_interval},t=e=__decorate([core_1.Component({selector:"system-input-time",template:'<div class="slds-form-element" [ngClass]="{\'slds-has-error\': !isValid}"><div class="slds-form-element__control"><div class="slds-combobox_container"><div class="slds-combobox slds-dropdown-trigger slds-dropdown-trigger_click slds-combobox-picklist slds-timepicker" [ngClass]="{\'slds-is-open\':isOpen}" role="combobox"><div class="slds-combobox__form-element slds-input-has-icon slds-input-has-icon_right" role="none"><input class="slds-input slds-combobox__input" aria-controls="listbox-unique-id" autocomplete="off" role="textbox" type="text" [ngModelOptions]="{updateOn: \'blur\'}" [(ngModel)]="display" (keyup.arrowup)="setDisplayToNextDropDownValue()" (keyup.arrowdown)="setDisplayToPreviousDropDownValue()"><div class="slds-input__icon-group slds-input__icon-group_right"><button *ngIf="canclear" class="slds-input__icon slds-input__icon_right slds-button slds-button_icon" style="position: relative;" (click)="clear()"><system-button-icon icon="clear"></system-button-icon></button> <button class="slds-input__icon slds-input__icon_right slds-button slds-button_icon" style="position: relative;" (click)="toggleDropDown()"><system-button-icon icon="clock"></system-button-icon></button></div></div><div role="listbox" (mouseleave)="closeDropDown()"><ul class="slds-listbox slds-listbox_vertical slds-dropdown slds-dropdown--fluid slds-dropdown--length-7" role="presentation"><li *ngFor="let dropdownValue of dropdownValues" role="presentation" class="slds-listbox__item" (click)="display = dropdownValue.display"><div class="slds-media slds-listbox__option slds-listbox__option_plain slds-media_small slds-media_center" [ngClass]="{\'slds-is-selected\': dropdownValue.offset == _time.offset}" role="option"><span class="slds-media__figure"><system-icon addclasses="slds-icon slds-listbox__icon-selected" icon="check" sprite="utility" size="x-small"></system-icon></span> <span class="slds-media__body"><span class="slds-truncate" [title]="dropdownValue.display">{{dropdownValue.display}}</span></span></div></li></ul></div></div></div></div><div *ngIf="!isValid" class="slds-form-element__help">{{language.getLabel(\'LBL_INPUT_INVALID\')}}</div></div>',providers:[{provide:forms_1.NG_VALUE_ACCESSOR,useExisting:core_1.forwardRef(function(){return e}),multi:!0}]}),__metadata("design:paramtypes",[core_1.ElementRef,core_1.Renderer2,services_8.userpreferences,services_3.language])],t)}();exports.SystemInputTime=SystemInputTime;var SystemInputDate=function(){function t(t,e,s,o){this.elementref=t,this.renderer=e,this.userpreferences=s,this.language=o,this._date={display:"",moment:null,valid:!0},this.isOpen=!1}var e;return(e=t).prototype.ngOnDestroy=function(){this.clickListener&&this.clickListener()},Object.defineProperty(t.prototype,"isValid",{get:function(){return this._date.valid},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"display",{get:function(){return this._date.display?this._date.display:""},set:function(t){if(t){var e=moment(t,this.userpreferences.getDateFormat(),!0);e.isValid()?(this._date.moment||(this._date.moment=new moment),this._date.moment.year(e.year()).month(e.month()).date(e.date()),this._date.valid=!0,this.toggleClosed(),"function"==typeof this.onChange&&this.onChange(this._date.moment)):(this._date.display=t,this._date.valid=!1)}else this.clear()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canclear",{get:function(){return!!this._date.display},enumerable:!0,configurable:!0}),t.prototype.clear=function(t){void 0===t&&(t=!0),this._date.moment=null,this._date.display="",this._date.valid=!0,"function"==typeof this.onChange&&t&&this.onChange(this._date.moment)},t.prototype.toggleOpen=function(){var e=this;this.isOpen=!this.isOpen,this.isOpen&&(this.clickListener=this.renderer.listen("document","click",function(t){return e.onDocumentClick(t)}))},t.prototype.toggleClosed=function(){this.isOpen=!1,this.clickListener&&this.clickListener()},t.prototype.onDocumentClick=function(t){this.isOpen&&!this.elementref.nativeElement.contains(t.target)&&(this.isOpen=!1,this.clickListener())},t.prototype.registerOnChange=function(t){this.onChange=t},t.prototype.registerOnTouched=function(t){this.onTouched=t},t.prototype.writeValue=function(t){t?(this._date.moment=new moment(t),this._date.display=this._date.moment.format(this.userpreferences.getDateFormat())):this.clear(!1)},t.prototype.datePicked=function(t){t&&(this._date.moment||(this._date.moment=new moment),this._date.moment=t,this._date.display=this._date.moment.format(this.userpreferences.getDateFormat()),this._date.valid=!0,"function"==typeof this.onChange&&this.onChange(this._date.moment),this.toggleClosed())},t=e=__decorate([core_1.Component({selector:"system-input-date",template:'<div class="slds-form-element" [ngClass]="{\'slds-has-error\': !isValid}"><div class="slds-form-element__control"><div class="slds-combobox_container"><div class="slds-combobox slds-dropdown-trigger slds-dropdown-trigger_click slds-combobox-picklist slds-timepicker" [ngClass]="{\'slds-is-open\':isOpen}" role="combobox"><div class="slds-combobox__form-element slds-input-has-icon slds-input-has-icon_right" role="none"><input class="slds-input slds-combobox__input" aria-controls="listbox-unique-id" autocomplete="off" role="textbox" type="text" placeholder="" [(ngModel)]="display"><div class="slds-input__icon-group slds-input__icon-group_right"><button *ngIf="canclear" class="slds-input__icon slds-input__icon_right slds-button slds-button_icon" style="position: relative;" (click)="clear()"><system-button-icon icon="clear"></system-button-icon></button> <button class="slds-input__icon slds-input__icon_right slds-button slds-button_icon" style="position: relative;" (click)="toggleOpen()"><system-button-icon icon="event"></system-button-icon></button></div></div><div aria-hidden="false" class="slds-datepicker slds-dropdown slds-dropdown_left" role="dialog"><system-input-date-picker [setDate]="_date.moment" (datePicked)="datePicked($event)"></system-input-date-picker></div></div></div></div><div *ngIf="!isValid" class="slds-form-element__help">{{language.getLabel(\'LBL_INPUT_INVALID\')}}</div></div>',providers:[{provide:forms_1.NG_VALUE_ACCESSOR,useExisting:core_1.forwardRef(function(){return e}),multi:!0}]}),__metadata("design:paramtypes",[core_1.ElementRef,core_1.Renderer2,services_8.userpreferences,services_3.language])],t)}();exports.SystemInputDate=SystemInputDate;var SystemInputDatePicker=function(){function t(t){this.language=t,this.datePicked=new core_1.EventEmitter,this.curDate=new moment,this.currentGrid=[]}return t.prototype.ngOnInit=function(){this.intializeGrid()},t.prototype.ngOnChanges=function(){this.intializeGrid()},t.prototype.intializeGrid=function(){this.setDate?this.curDate=new moment(this.setDate):this.curDate=new moment,this.buildGrid()},Object.defineProperty(t.prototype,"currentYear",{get:function(){return this.curDate.year()},set:function(t){this.curDate.year(t),this.buildGrid()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentMonth",{get:function(){return moment.months()[this.curDate.month()]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"weekdays",{get:function(){return moment.weekdaysShort()},enumerable:!0,configurable:!0}),t.prototype.notCurrentMonth=function(t){return t!==this.curDate.month()},t.prototype.isToday=function(t,e){var s=new moment;return s.year()===this.curDate.year()&&s.month()===e&&s.date()==t},t.prototype.isCurrent=function(t,e){return!(!this.setDate||this.curDate.year()!==this.setDate.year()||this.setDate.month()!==e||this.setDate.date()!=t)},t.prototype.prevMonth=function(){this.curDate.subtract(1,"months"),this.buildGrid()},t.prototype.nextMonth=function(){this.curDate.add(1,"months"),this.buildGrid()},t.prototype.goToday=function(){this.curDate=new moment},t.prototype.pickDate=function(t,e){this.datePicked.emit((new moment).year(this.currentYear).month(e).date(t))},t.prototype.buildGrid=function(){this.currentGrid=[];var t=new moment(this.curDate);t.date(1),t.day(0);for(var e=0;e<6;){for(var s=0,o=[];s<7;)o.push({day:t.date(),month:t.month()}),t.add(1,"d"),s++;this.currentGrid.push(o),e++}},__decorate([core_1.Input(),__metadata("design:type",Object)],t.prototype,"setDate",void 0),__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],t.prototype,"datePicked",void 0),t=__decorate([core_1.Component({selector:"system-input-date-picker",template:'<div class="slds-datepicker__filter slds-grid"><div class="slds-datepicker__filter_month slds-grid slds-grid_align-spread slds-grow"><div class="slds-align-middle"><button class="slds-button slds-button_icon slds-button_icon-container" title="Previous Month" (click)="prevMonth()"><system-button-icon [icon]="\'left\'"></system-button-icon></button></div><h2 aria-atomic="true" aria-live="assertive" class="slds-align-middle">{{currentMonth}}</h2><div class="slds-align-middle"><button class="slds-button slds-button_icon slds-button_icon-container" title="Next Month" (click)="nextMonth()"><system-button-icon [icon]="\'right\'"></system-button-icon></button></div></div><div class="slds-shrink-none"><div class="slds-select_container"><select class="slds-select" [(ngModel)]="currentYear"><option>2015</option><option>2016</option><option>2017</option><option>2018</option><option>2019</option><option>2020</option></select></div></div></div><table aria-labelledby="month" aria-multiselectable="true" class="slds-datepicker__month" role="grid"><thead><tr id="weekdays"><th *ngFor="let weekday of weekdays" scope="col"><abbr>{{weekday}}</abbr></th></tr></thead><tbody><tr *ngFor="let week of currentGrid"><td *ngFor="let day of week" role="gridcell" (click)="pickDate(day.day, day.month)" [ngClass]="{\'slds-disabled-text\': notCurrentMonth(day.month), \'slds-is-today\': isToday(day.day, day.month), \'slds-is-selected\': isCurrent(day.day, day.month)}"><span class="slds-day">{{day.day}}</span></td></tr></tbody></table><button class="slds-button slds-align_absolute-center slds-text-link" (click)="goToday()">{{language.getLabel(\'LBL_TODAY\')}}</button>'}),__metadata("design:paramtypes",[services_3.language])],t)}();exports.SystemInputDatePicker=SystemInputDatePicker;var SystemGoogleplacesSearch=function(){function t(t,e,s,o,n){this.language=t,this.backend=e,this.configuration=s,this.elementref=o,this.renderer=n,this.address=new core_1.EventEmitter,this.isenabled=!1,this.autocompletesearchterm="",this.autocompleteTimeout=void 0,this.autocompleteResults=[],this.autocompleteClickListener=void 0,this.displayAutocompleteResults=!1;var i=this.configuration.getCapabilityConfig("google_api");i.key&&""!=i.key&&(this.isenabled=!0)}return Object.defineProperty(t.prototype,"searchterm",{get:function(){return this.autocompletesearchterm},set:function(t){var e=this;this.autocompletesearchterm=t,this.autocompleteTimeout&&window.clearTimeout(this.autocompleteTimeout),this.autocompleteTimeout=window.setTimeout(function(){return e.doAutocomplete()},500)},enumerable:!0,configurable:!0}),t.prototype.onSearchFocus=function(){1<this.autocompletesearchterm.length&&0<this.autocompleteResults.length&&this.openSearchResults()},t.prototype.openSearchResults=function(){var e=this;this.displayAutocompleteResults=!0,this.autocompleteClickListener=this.renderer.listen("document","click",function(t){return e.onClick(t)})},t.prototype.onClick=function(t){this.elementref.nativeElement.contains(t.target)||this.closeSearchResutls()},t.prototype.closeSearchResutls=function(){this.autocompleteClickListener&&this.autocompleteClickListener(),this.displayAutocompleteResults=!1},t.prototype.doAutocomplete=function(){var e=this;5<this.autocompletesearchterm.length&&this.backend.getRequest("googleapi/places/autocomplete/"+this.autocompletesearchterm).subscribe(function(t){t.predictions&&0<t.predictions.length?(e.autocompleteResults=t.predictions,e.openSearchResults()):(e.autocompleteResults=[],e.closeSearchResutls())})},t.prototype.getAddressDetail=function(t){var s=this;this.displayAutocompleteResults=!1,this.autocompletesearchterm="",this.backend.getRequest("googleapi/places/"+t).subscribe(function(t){var e={street:t.address.street,city:t.address.city,postalcode:t.address.postalcode,state:t.address.state,country:t.address.country,latitude:parseFloat(t.address.location.lat),longitude:parseFloat(t.address.location.lng)};s.address.emit(e)})},__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],t.prototype,"address",void 0),t=__decorate([core_1.Component({selector:"system-googleplaces-search",template:'<div *ngIf="isenabled" class="slds-form-element"><div class="slds-form-element__control"><div class="slds-combobox_container"><div class="slds-combobox slds-dropdown-trigger slds-dropdown-trigger_click" [ngClass]="{\'slds-is-open\': displayAutocompleteResults}" role="combobox"><div class="slds-combobox__form-element slds-input-has-icon slds-input-has-icon_right" role="none"><input type="text" class="slds-input slds-combobox__input" [placeholder]="language.getLabel(\'LBL_SEARCH_ADDRESS\')" [(ngModel)]="searchterm" (focus)="onSearchFocus()"><system-custom-icon icon="google" addclasses="slds-input__icon slds-input__icon--left"></system-custom-icon></div><div class="slds-dropdown slds-dropdown_length-with-icon-7 slds-dropdown_fluid" role="listbox"><ul class="slds-listbox slds-listbox_vertical" role="presentation"><li *ngFor="let autocompleteResult of autocompleteResults" class="slds-listbox__item" role="presentation" (click)="getAddressDetail(autocompleteResult.place_id)"><div class="slds-lookup__result-text slds-p-around--x-small"><a href="javascript:void(0)">{{autocompleteResult.description}}</a></div></li></ul></div></div></div></div></div>'}),__metadata("design:paramtypes",[services_3.language,services_4.backend,services_6.configurationService,core_1.ElementRef,core_1.Renderer2])],t)}();exports.SystemGoogleplacesSearch=SystemGoogleplacesSearch;var SystemComponentSet=function(){function t(t){this.metadata=t,this.componentset="",this.viewInitialized=!1,this._componentset="",this._componentRefs=[]}return t.prototype.ngAfterViewInit=function(){this.renderComnponentset(),this.viewInitialized=!0},t.prototype.ngOnChanges=function(){if(this.viewInitialized&&this.componentset!=this._componentset){for(var t=0,e=this._componentRefs;t<e.length;t++){e[t].destroy()}this._componentRefs=[],this.renderComnponentset()}},t.prototype.renderComnponentset=function(){var s=this;if(this.componentset)for(var t=function(e){o.metadata.addComponent(e.component,o.componentcontainer).subscribe(function(t){t.instance.componentconfig=e.componentconfig,s._componentRefs.push(t)})},o=this,e=0,n=this.metadata.getComponentSetObjects(this.componentset);e<n.length;e++){t(n[e])}this._componentset=this.componentset},__decorate([core_1.ViewChild("componentcontainer",{read:core_1.ViewContainerRef}),__metadata("design:type",core_1.ViewContainerRef)],t.prototype,"componentcontainer",void 0),__decorate([core_1.Input(),__metadata("design:type",String)],t.prototype,"componentset",void 0),t=__decorate([core_1.Component({selector:"system-componentset",template:"<div #componentcontainer></div>"}),__metadata("design:paramtypes",[services_1.metadata])],t)}();exports.SystemComponentSet=SystemComponentSet;var SystemComponents=function(){function SystemComponents(t,e){this.metadata=t,this.vms=e,this.version="1.0",this.build_date="2018-11-23",this.vms.registerModule(this)}return SystemComponents=__decorate([core_1.NgModule({imports:[directives_1.DirectivesModule,common_2.CommonModule,forms_2.FormsModule],declarations:[SystemIcon,SystemComponentContainer,SystemDynamicComponent,SystemUtilityIcon,SystemStencil,SystemTableStencils,SystemSpinner,SystemComponentMissing,SystemDynamicRouteContainer,SystemTooltip,SystemToastContainer,SystemButtonIcon,SystemButtonCustomIcon,SystemButtonGroup,SystemActionIcon,SystemConfirmDialog,SystemTinyMCE,SystemTinyMCEModal,SpeechRecognition,SystemCaptureImage,PaginationControlsComponent,PaginationPipe,SystemPrompt,SystemModalWrapper,SystemLoadingModal,SystemModal,SystemModalHeader,SystemModalContent,SystemModalFooter,SystemCollabsableTab,SystemLink,SystemCustomIcon,SystemCheckbox,SystemCheckboxGroup,SystemCheckboxGroupCheckbox,SystemCard,SystemCardHeaderTitle,SystemCardBody,SystemCardFooter,SystemTree,SystemTreeItem,SystemSelect,SystemSection,SystemRichTextEditor,SystemRichTextSourceModal,SystemInputTime,SystemInputDate,SystemInputDatePicker,SystemGoogleplacesSearch,SystemComponentSet],entryComponents:[SystemDynamicRouteContainer],exports:[SystemIcon,SystemUtilityIcon,SystemStencil,SystemTableStencils,SystemSpinner,SystemDynamicComponent,SystemComponentMissing,SystemTooltip,SystemToastContainer,SystemButtonIcon,SystemButtonCustomIcon,SystemButtonGroup,SystemActionIcon,SystemTinyMCE,SpeechRecognition,PaginationControlsComponent,PaginationPipe,SystemPrompt,SystemModalWrapper,SystemModal,SystemModalHeader,SystemModalContent,SystemModalFooter,SystemCollabsableTab,SystemLink,SystemCustomIcon,SystemCheckbox,SystemCheckboxGroup,SystemCheckboxGroupCheckbox,SystemCard,SystemCardHeaderTitle,SystemCardBody,SystemCardFooter,SystemTree,SystemTreeItem,SystemSelect,SystemSection,SystemRichTextEditor,SystemInputTime,SystemInputDate,SystemInputDatePicker,SystemGoogleplacesSearch,SystemStencil,SystemComponentSet]}),__metadata("design:paramtypes",[services_1.metadata,services_5.VersionManagerService])],SystemComponents)}();exports.SystemComponents=SystemComponents;